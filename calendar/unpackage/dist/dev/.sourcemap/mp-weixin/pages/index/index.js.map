{"version":3,"file":"index.js","sources":["pages/index/index.vue","E:/HBuilder X/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<template>\r\n  <view class=\"calendar-container\">\r\n    <!-- Ëá™ÂÆö‰πâÂØºËà™Ê†è -->\r\n    <view class=\"custom-navbar\">\r\n      <view class=\"navbar-left\">\r\n        <text class=\"navbar-title\">{{ calendarStore.pageTitle }}</text>\r\n      </view>\r\n      <view class=\"navbar-right\">\r\n        <button class=\"add-btn\" @click=\"handleAddEvent\">\r\n          <text class=\"btn-text\">+ Ê∑ªÂä†</text>\r\n        </button>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- ËßÜÂõæÂàáÊç¢ÂíåÊó•ÊúüÂØºËà™ -->\r\n    <view class=\"calendar-header\">\r\n      <view class=\"view-switcher\">\r\n        <button \r\n          class=\"view-btn\" \r\n          :class=\"{ active: calendarStore.currentView === 'month' }\"\r\n          @click=\"handleSwitchView('month')\"\r\n        >\r\n          Êúà\r\n        </button>\r\n        <button \r\n          class=\"view-btn\" \r\n          :class=\"{ active: calendarStore.currentView === 'week' }\"\r\n          @click=\"handleSwitchView('week')\"\r\n        >\r\n          Âë®\r\n        </button>\r\n        <button \r\n          class=\"view-btn\" \r\n          :class=\"{ active: calendarStore.currentView === 'day' }\"\r\n          @click=\"handleSwitchView('day')\"\r\n        >\r\n          Êó•\r\n        </button>\r\n      </view>\r\n      \r\n      <view class=\"date-navigation\">\r\n        <button class=\"nav-btn\" @click=\"handlePreviousPeriod\">\r\n          ‚Äπ\r\n        </button>\r\n        <text class=\"current-date\">{{ calendarStore.displayDate }}</text>\r\n        <button class=\"nav-btn\" @click=\"handleNextPeriod\">\r\n          ‚Ä∫\r\n        </button>\r\n        <button class=\"today-btn\" @click=\"handleGoToToday\">\r\n          ‰ªäÂ§©\r\n        </button>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- Êó•ÂéÜ‰∏ª‰Ωì -->\r\n    <view class=\"calendar-body\">\r\n      <!-- ÊúàËßÜÂõæ -->\r\n      <view v-if=\"calendarStore.currentView === 'month'\" class=\"month-view\">\r\n        <view class=\"weekdays-header\">\r\n          <view class=\"weekday\" v-for=\"day in weekdays\" :key=\"day\">\r\n            {{ day }}\r\n          </view>\r\n        </view>\r\n        \r\n        <view class=\"month-grid\">\r\n          <view \r\n            v-for=\"(day, index) in calendarStore.monthDays\" \r\n            :key=\"index\"\r\n            class=\"calendar-day\"\r\n            :class=\"{\r\n              'not-current-month': !day.isCurrentMonth,\r\n              'today': day.isToday,\r\n              'selected': day.isSelected\r\n            }\"\r\n            @click=\"handleSelectDate(day.date)\"\r\n          >\r\n            <view class=\"day-content-wrapper\">\r\n              <text class=\"day-number\">{{ day.day }}</text>\r\n            </view>\r\n            \r\n            <text class=\"lunar-day\">{{ day.lunarDay }}</text>\r\n            \r\n            <!-- ‰ºòÂåñÔºö‰ΩøÁî®È¢ÑËÆ°ÁÆóÁöÑ‰∫ã‰ª∂Êï∞ÊçÆ -->\r\n            <view class=\"event-dots\">\r\n              <view \r\n                v-for=\"event in monthDayEvents[day.dateStr]\"\r\n                :key=\"event._id\"\r\n                class=\"event-dot\"\r\n                :style=\"{ backgroundColor: event.color }\"\r\n              ></view>\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n\r\n      <!-- Âë®ËßÜÂõæ -->\r\n      <view v-if=\"calendarStore.currentView === 'week'\" class=\"week-view\">\r\n        <view class=\"week-grid-container\">\r\n          <view class=\"week-header\">\r\n            <view class=\"time-header-cell\"></view>\r\n            <view \r\n              v-for=\"day in calendarStore.weekDays\" \r\n              :key=\"day.fullDate.toString()\"\r\n              class=\"day-header-cell\"\r\n              @click=\"handleSelectDate(day.fullDate)\"\r\n            >\r\n              <text class=\"weekday\">{{ day.weekday }}</text>\r\n              <text class=\"date\">{{ day.date }}</text>\r\n            </view>\r\n          </view>\r\n          \r\n          <view class=\"week-content\">\r\n            <view class=\"time-column\" ref=\"timeColumnRef\">\r\n              <view \r\n                v-for=\"time in timeSlots\" \r\n                :key=\"time\"\r\n                class=\"time-slot\"\r\n              >\r\n                <text class=\"time-label\">{{ time }}</text>\r\n              </view>\r\n            </view>\r\n            \r\n            <view class=\"days-content\" ref=\"daysContentRef\">\r\n              <view \r\n                v-for=\"day in calendarStore.weekDays\" \r\n                :key=\"day.fullDate.toString()\"\r\n                class=\"day-column\"\r\n              >\r\n                <view class=\"day-content-column\">\r\n                  <view \r\n                    v-for=\"time in timeSlots\" \r\n                    :key=\"time\"\r\n                    class=\"time-content-slot\"\r\n                    @click=\"handleAddEventAtTime(day.fullDate, time)\"\r\n                  >\r\n                    <view class=\"events-container\">\r\n                      <view \r\n                        v-for=\"(event, index) in getLimitedEventsForTimeSlot(day.fullDate, time)\" \r\n                        :key=\"event._id\"\r\n                        class=\"week-event\"\r\n                        :style=\"{ backgroundColor: event.color }\"\r\n                        :class=\"{ 'more-events': index === 1 && hasMoreEvents(day.fullDate, time) }\"\r\n                        @click.stop=\"index === 1 && hasMoreEvents(day.fullDate, time) ? handleViewMoreEvents(day.fullDate, time) : handleViewEvent(event)\"\r\n                      >\r\n                        <text class=\"event-title\">\r\n                          {{ index === 1 && hasMoreEvents(day.fullDate, time) ? '...' : getShortTitle(event.title) }}\r\n                        </text>\r\n                        <!-- Ê∑ªÂä†ÊèêÈÜíÂõæÊ†á -->\r\n                        <view v-if=\"event.reminders && event.reminders.length > 0\" class=\"reminder-icon\">\r\n                          üîî\r\n                        </view>\r\n                      </view>\r\n                    </view>\r\n                  </view>\r\n                </view>\r\n              </view>\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n\r\n      <!-- Êó•ËßÜÂõæ -->\r\n      <view v-if=\"calendarStore.currentView === 'day'\" class=\"day-view\">\r\n        <view class=\"day-header\">\r\n          <text class=\"date\">{{ calendarStore.selectedDate.format('YYYYÂπ¥MMÊúàDDÊó•') }}</text>\r\n          <text class=\"weekday\">{{ calendarStore.selectedDate.format('dddd') }}</text>\r\n        </view>\r\n        \r\n        <view class=\"day-time-grid\">\r\n          <view class=\"all-day-header\" v-if=\"calendarStore.getLongEventsForDay(calendarStore.selectedDate).length > 0\">\r\n            <view class=\"all-day-label\">ÂÖ®Â§©/Ë∑®Â§©</view>\r\n            <view class=\"all-day-list\">\r\n              <view \r\n                v-for=\"event in calendarStore.getLongEventsForDay(calendarStore.selectedDate)\" \r\n                :key=\"event._id\"\r\n                class=\"long-event-item\"\r\n                :style=\"{ backgroundColor: event.color + '20', borderLeft: '8rpx solid ' + event.color }\"\r\n                @click.stop=\"handleViewEvent(event)\" \r\n              >\r\n                <text class=\"long-event-title\">{{ event.title }}</text>\r\n                <text class=\"long-event-time\">{{ event.startDate }} Ëá≥ {{ event.endDate }}</text>\r\n              </view>\r\n            </view>\r\n          </view>\r\n          <view \r\n            v-for=\"time in timeSlots\" \r\n            :key=\"time\"\r\n            class=\"time-row\"\r\n          >\r\n            <view class=\"time-label\">{{ time }}</view>\r\n            <view \r\n              class=\"time-slot-content\"\r\n              @click=\"handleAddEventAtTime(calendarStore.selectedDate, time)\"\r\n            >\r\n              <view class=\"day-events-container\">\r\n                <view \r\n                  v-for=\"event in getEventsForTimeSlot(calendarStore.selectedDate, time)\" \r\n                  :key=\"event._id\"\r\n                  class=\"day-event\"\r\n                  :style=\"{ backgroundColor: event.color }\"\r\n                  @click.stop=\"handleViewEvent(event)\"\r\n                >\r\n                  <text class=\"event-title\">{{ event.title }}</text>\r\n                  <view class=\"event-time-and-reminder\">\r\n                    <text class=\"event-time\">{{ event.startTime }} - {{ event.endTime }}</text>\r\n                    <!-- Ê∑ªÂä†ÊèêÈÜíÂõæÊ†á -->\r\n                    <view v-if=\"event.reminders && event.reminders.length > 0\" class=\"day-reminder-icon\">\r\n                      üîî\r\n                    </view>\r\n                  </view>\r\n                </view>\r\n              </view>\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- Ê∑ªÂä†/ÁºñËæëÊó•Á®ãÊ®°ÊÄÅÊ°Ü -->\r\n    <view v-if=\"showEventModal\" class=\"modal-mask\">\r\n      <view class=\"modal-content\">\r\n        <view class=\"modal-header\">\r\n          <text class=\"modal-title\">{{ isEditing ? 'ÁºñËæëÊó•Á®ã' : 'Ê∑ªÂä†Êó•Á®ã' }}</text>\r\n          <button class=\"close-btn\" @click=\"closeEventModal\">√ó</button>\r\n        </view>\r\n        \r\n        <view class=\"event-form\">\r\n          <view class=\"form-item\">\r\n            <text class=\"form-label\">Ê†áÈ¢ò</text>\r\n            <input \r\n              v-model=\"eventForm.title\" \r\n              class=\"form-input\" \r\n              placeholder=\"ËØ∑ËæìÂÖ•Êó•Á®ãÊ†áÈ¢ò\"\r\n              :focus=\"autoFocusTitle\"\r\n            />\r\n          </view>\r\n          \r\n          <view class=\"time-picker-group\">\r\n            <view class=\"form-item\">\r\n              <text class=\"form-label\">ÂºÄÂßãÊó∂Èó¥</text>\r\n              <view class=\"datetime-row\">\r\n                <picker \r\n                  mode=\"date\" \r\n                  :value=\"eventForm.startDate\" \r\n                  @change=\"(e) => handleDateChange('startDate', e.detail.value)\"\r\n                  class=\"date-picker\"\r\n                >\r\n                  <view class=\"form-input picker-display\">{{ eventForm.startDate || 'ÈÄâÊã©Êó•Êúü' }}</view>\r\n                </picker>\r\n                <picker \r\n                  mode=\"time\" \r\n                  :value=\"eventForm.startTime\" \r\n                  @change=\"(e) => handleTimeChange('startTime', e.detail.value)\"\r\n                  class=\"time-picker\"\r\n                >\r\n                  <view class=\"form-input picker-display\">{{ eventForm.startTime || 'ÈÄâÊã©Êó∂Èó¥' }}</view>\r\n                </picker>\r\n              </view>\r\n            </view>\r\n            \r\n            <view class=\"form-item\">\r\n              <text class=\"form-label\">ÁªìÊùüÊó∂Èó¥</text>\r\n              <view class=\"datetime-row\">\r\n                <picker \r\n                  mode=\"date\" \r\n                  :value=\"eventForm.endDate\" \r\n                  @change=\"(e) => handleDateChange('endDate', e.detail.value)\"\r\n                  class=\"date-picker\"\r\n                >\r\n                  <view class=\"form-input picker-display\">{{ eventForm.endDate || 'ÈÄâÊã©Êó•Êúü' }}</view>\r\n                </picker>\r\n                <picker \r\n                  mode=\"time\" \r\n                  :value=\"eventForm.endTime\" \r\n                  @change=\"(e) => handleTimeChange('endTime', e.detail.value)\"\r\n                  class=\"time-picker\"\r\n                >\r\n                  <view class=\"form-input picker-display\">{{ eventForm.endTime || 'ÈÄâÊã©Êó∂Èó¥' }}</view>\r\n                </picker>\r\n              </view>\r\n            </view>\r\n          </view>\r\n          \r\n          <view class=\"form-item\">\r\n            <text class=\"form-label\">È¢úËâ≤</text>\r\n            <view class=\"color-picker\">\r\n              <view \r\n                v-for=\"color in calendarStore.colorOptions\" \r\n                :key=\"color\"\r\n                class=\"color-option\"\r\n                :style=\"{ backgroundColor: color }\"\r\n                :class=\"{ selected: eventForm.color === color }\"\r\n                @click=\"eventForm.color = color\"\r\n              ></view>\r\n            </view>\r\n          </view>\r\n          \r\n          <!-- ÊèêÈÜíÈÄâÈ°π -->\r\n          <view class=\"form-item\">\r\n            <text class=\"form-label\">ÊèêÈÜíÊó∂Èó¥</text>\r\n            <view class=\"reminder-picker\">\r\n              <view \r\n                v-for=\"option in calendarStore.reminderOptions\" \r\n                :key=\"option.value\"\r\n                class=\"reminder-option\"\r\n                :class=\"{ selected: eventForm.reminders.includes(option.value) }\"\r\n                @click=\"toggleReminder(option.value)\"\r\n              >\r\n                <view class=\"reminder-checkbox\">\r\n                  <text v-if=\"eventForm.reminders.includes(option.value)\" class=\"reminder-check\">‚úì</text>\r\n                </view>\r\n                <text class=\"reminder-label\">{{ option.label }}</text>\r\n              </view>\r\n              <!-- Êó†ÊèêÈÜíÈÄâÈ°π -->\r\n              <view \r\n                class=\"reminder-option\"\r\n                :class=\"{ selected: eventForm.reminders.length === 0 }\"\r\n                @click=\"clearReminders\"\r\n              >\r\n                <view class=\"reminder-checkbox\">\r\n                  <text v-if=\"eventForm.reminders.length === 0\" class=\"reminder-check\">‚úì</text>\r\n                </view>\r\n                <text class=\"reminder-label\">Êó†ÊèêÈÜí</text>\r\n              </view>\r\n            </view>\r\n          </view>\r\n          \r\n          <!-- ÊòæÁ§∫Â∑≤ËÆæÁΩÆÁöÑÊèêÈÜí -->\r\n          <view v-if=\"eventForm.reminders.length > 0\" class=\"form-item reminders-display\">\r\n            <text class=\"form-label\">Â∑≤ËÆæÁΩÆÊèêÈÜí:</text>\r\n            <view class=\"reminders-list\">\r\n              <view \r\n                v-for=\"(reminder, index) in sortedReminders\" \r\n                :key=\"index\"\r\n                class=\"reminder-badge\"\r\n              >\r\n                <text class=\"reminder-text\">{{ getReminderLabel(reminder) }}</text>\r\n              </view>\r\n            </view>\r\n          </view>\r\n          \r\n          <view class=\"form-item\">\r\n            <text class=\"form-label\">Â§áÊ≥®</text>\r\n            <textarea \r\n              v-model=\"eventForm.notes\" \r\n              class=\"form-textarea\" \r\n              placeholder=\"ËØ∑ËæìÂÖ•Â§áÊ≥®‰ø°ÊÅØ\" \r\n            />\r\n          </view>\r\n        </view>\r\n        \r\n        <view class=\"modal-actions\">\r\n          <button class=\"btn btn-cancel\" @click=\"closeEventModal\">ÂèñÊ∂à</button>\r\n          <button class=\"btn btn-delete\" v-if=\"isEditing\" @click=\"handleDeleteEvent\">Âà†Èô§</button>\r\n          <button class=\"btn btn-confirm\" @click=\"handleSaveEvent\">Á°ÆËÆ§</button>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- Âä†ËΩΩÊèêÁ§∫ -->\r\n    <view v-if=\"calendarStore.loading\" class=\"loading-mask\">\r\n      <view class=\"loading-content\">\r\n        <text class=\"loading-text\">Âä†ËΩΩ‰∏≠...</text>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, reactive, onMounted, watch, nextTick, computed } from 'vue'\r\nimport moment from 'moment'\r\nimport { useCalendarStore } from '@/stores/calendar.js'\r\nimport type { CalendarEvent, EventForm } from '@/types'\r\nimport reminderService from '@/utils/reminder.js'\r\n\r\nconst calendarStore = useCalendarStore()\r\n\r\nconst showEventModal = ref(false)\r\nconst isEditing = ref(false)\r\nconst editingEventId = ref<string | null>(null)\r\nconst autoFocusTitle = ref(false)\r\n\r\n// Ê∑ªÂä†ÊªöÂä®ÂêåÊ≠•Áõ∏ÂÖ≥ÁöÑref\r\nconst timeColumnRef = ref<HTMLElement | null>(null)\r\nconst daysContentRef = ref<HTMLElement | null>(null)\r\n\r\n// ‰∫ã‰ª∂Ë°®ÂçïÊï∞ÊçÆ\r\nconst eventForm = reactive<EventForm>({\r\n  title: '',\r\n  startDate: moment().format('YYYY-MM-DD'),\r\n  startTime: '09:00',\r\n  endDate: moment().format('YYYY-MM-DD'),\r\n  endTime: '10:00',\r\n  color: '#2979ff',\r\n  notes: '',\r\n  isAllDay: false,\r\n  reminders: []\r\n})\r\n\r\nconst weekdays = ['Êó•', '‰∏Ä', '‰∫å', '‰∏â', 'Âõõ', '‰∫î', 'ÂÖ≠']\r\nconst timeSlots = Array.from({ length: 24 }, (_, i) => \r\n  `${i.toString().padStart(2, '0')}:00`\r\n)\r\n\r\n// ==================== ËÆ°ÁÆóÂ±ûÊÄß ====================\r\n\r\n// È¢ÑËÆ°ÁÆóÊúàËßÜÂõæÊØèÂ§©ÁöÑ‰∫ã‰ª∂\r\nconst monthDayEvents = computed(() => {\r\n  if (calendarStore.currentView !== 'month') return {}\r\n  \r\n  const eventsMap: Record<string, CalendarEvent[]> = {}\r\n  \r\n  calendarStore.monthDays.forEach(day => {\r\n    const dateStr = day.dateStr\r\n    if (dateStr) {\r\n      const dayEvents = calendarStore.getTimeEventsForDay(day.date).slice(0, 3)\r\n      eventsMap[dateStr] = dayEvents\r\n    }\r\n  })\r\n  \r\n  return eventsMap\r\n})\r\n\r\n// ÊéíÂ∫èÂêéÁöÑÊèêÈÜíÂàóË°®\r\nconst sortedReminders = computed(() => {\r\n  return [...eventForm.reminders].sort((a, b) => a - b)\r\n})\r\n\r\n// ==================== ÊèêÈÜíÁõ∏ÂÖ≥ÊñπÊ≥ï ====================\r\n\r\n// ÂàáÊç¢ÊèêÈÜíÈÄâÈ°π\r\nconst toggleReminder = (value: number) => {\r\n  const index = eventForm.reminders.indexOf(value)\r\n  if (index === -1) {\r\n    // Ê∑ªÂä†ÊèêÈÜí\r\n    eventForm.reminders.push(value)\r\n    // ÊåâÊó∂Èó¥È°∫Â∫èÊéíÂ∫è\r\n    eventForm.reminders.sort((a, b) => a - b)\r\n  } else {\r\n    // ÁßªÈô§ÊèêÈÜí\r\n    eventForm.reminders.splice(index, 1)\r\n  }\r\n}\r\n\r\n// Ê∏ÖÈô§ÊâÄÊúâÊèêÈÜí\r\nconst clearReminders = () => {\r\n  eventForm.reminders = []\r\n}\r\n\r\n// Ëé∑ÂèñÊèêÈÜíÊ†áÁ≠æ\r\nconst getReminderLabel = (minutes: number): string => {\r\n  const option = calendarStore.reminderOptions.find(opt => opt.value === minutes)\r\n  return option ? option.label : `${minutes}ÂàÜÈíüÂâç`\r\n}\r\n\r\n// ==================== ËßÜÂõæÂàáÊç¢ÊñπÊ≥ï ====================\r\n\r\nconst handleSwitchView = (view: string) => {\r\n  const oldView = calendarStore.currentView\r\n  calendarStore.switchView(view)\r\n  \r\n  if (oldView !== view) {\r\n    setTimeout(() => {\r\n      calendarStore.loadEventsSilently()\r\n    }, 300)\r\n  }\r\n}\r\n\r\nconst handlePreviousPeriod = () => {\r\n  calendarStore.previousPeriod()\r\n  \r\n  setTimeout(() => {\r\n    calendarStore.loadEventsSilently()\r\n  }, 200)\r\n}\r\n\r\nconst handleNextPeriod = () => {\r\n  calendarStore.nextPeriod()\r\n  \r\n  setTimeout(() => {\r\n    calendarStore.loadEventsSilently()\r\n  }, 200)\r\n}\r\n\r\nconst handleGoToToday = () => {\r\n  calendarStore.goToToday()\r\n  \r\n  setTimeout(() => {\r\n    calendarStore.loadEventsSilently()\r\n  }, 200)\r\n}\r\n\r\nconst handleSelectDate = (date: any) => {\r\n  calendarStore.selectDate(date)\r\n  \r\n  setTimeout(() => {\r\n    calendarStore.loadEventsSilently()\r\n  }, 200)\r\n}\r\n\r\n// ==================== ‰∫ã‰ª∂Â§ÑÁêÜÊñπÊ≥ï ====================\r\n\r\n// ÊªöÂä®ÂêåÊ≠•ÊñπÊ≥ï\r\nconst syncScroll = () => {\r\n  const timeColumn = timeColumnRef.value\r\n  const daysContent = daysContentRef.value\r\n  \r\n  if (timeColumn && daysContent) {\r\n    daysContent.addEventListener('scroll', () => {\r\n      timeColumn.scrollTop = daysContent.scrollTop\r\n    })\r\n    \r\n    timeColumn.addEventListener('scroll', () => {\r\n      daysContent.scrollTop = timeColumn.scrollTop\r\n    })\r\n  }\r\n}\r\n\r\n// Âë®ËßÜÂõæÊñπÊ≥ï\r\nconst getLimitedEventsForTimeSlot = (date: any, time: string) => {\r\n  const events = calendarStore.getEventsForTimeSlot(date, time)\r\n  return events.slice(0, 2)\r\n}\r\n\r\nconst hasMoreEvents = (date: any, time: string) => {\r\n  const events = calendarStore.getEventsForTimeSlot(date, time)\r\n  return events.length > 2\r\n}\r\n\r\nconst getShortTitle = (title: string) => {\r\n  if (title.length <= 6) {\r\n    return title\r\n  }\r\n  return title.substring(0, 6) + '...'\r\n}\r\n\r\nconst handleViewMoreEvents = (date: any, time: string) => {\r\n  const events = calendarStore.getEventsForTimeSlot(date, time)\r\n  uni.showActionSheet({\r\n    title: `${moment(date).format('MMÊúàDDÊó•')} ${time} ÁöÑ‰∫ã‰ª∂`,\r\n    itemList: events.map(event => event.title),\r\n    success: (res) => {\r\n      const selectedEvent = events[res.tapIndex]\r\n      handleViewEvent(selectedEvent)\r\n    }\r\n  })\r\n}\r\n\r\n// Êó•ËßÜÂõæÊñπÊ≥ï\r\nconst getEventsForTimeSlot = (date: any, time: string) => {\r\n  return calendarStore.getEventsForTimeSlot(date, time)\r\n}\r\n\r\n// ==================== ‰∫ã‰ª∂Ë°®ÂçïÂ§ÑÁêÜ ====================\r\n\r\nconst handleDateChange = (field: 'startDate' | 'endDate', value: string) => {\r\n  eventForm[field] = value\r\n  if (field === 'startDate' && eventForm.startDate > eventForm.endDate) {\r\n    eventForm.endDate = value\r\n  }\r\n}\r\n\r\nconst handleTimeChange = (field: 'startTime' | 'endTime', value: string) => {\r\n  eventForm[field] = value\r\n  if (field === 'startTime' && \r\n      eventForm.startDate === eventForm.endDate && \r\n      eventForm.startTime >= eventForm.endTime) {\r\n    const [hours, minutes] = value.split(':').map(Number)\r\n    const endMoment = new Date()\r\n    endMoment.setHours(hours + 1, minutes)\r\n    eventForm.endTime = `${endMoment.getHours().toString().padStart(2, '0')}:${endMoment.getMinutes().toString().padStart(2, '0')}`\r\n  }\r\n}\r\n\r\nconst handleAddEvent = () => {\r\n  resetEventForm()\r\n  showEventModal.value = true\r\n  isEditing.value = false\r\n  editingEventId.value = null\r\n  nextTick(() => {\r\n    autoFocusTitle.value = true\r\n  })\r\n}\r\n\r\nconst handleAddEventAtTime = (date: any, time: string) => {\r\n  resetEventForm()\r\n  const dateStr = moment(date).format('YYYY-MM-DD')\r\n  eventForm.startDate = dateStr\r\n  eventForm.endDate = dateStr\r\n  eventForm.startTime = time\r\n  const endTime = moment(time, 'HH:mm').add(1, 'hour').format('HH:mm')\r\n  eventForm.endTime = endTime\r\n  showEventModal.value = true\r\n  isEditing.value = false\r\n  nextTick(() => {\r\n    autoFocusTitle.value = true\r\n  })\r\n}\r\n\r\nconst handleViewEvent = (event: CalendarEvent) => {\r\n  isEditing.value = true\r\n  editingEventId.value = event._id!\r\n  eventForm.title = event.title\r\n  eventForm.startDate = event.startDate\r\n  eventForm.endDate = event.endDate\r\n  eventForm.startTime = event.startTime || '09:00'\r\n  eventForm.endTime = event.endTime || '10:00'\r\n  eventForm.color = event.color || '#2979ff'\r\n  eventForm.notes = event.notes || ''\r\n  eventForm.reminders = event.reminders || []\r\n  \r\n  showEventModal.value = true\r\n  nextTick(() => {\r\n    autoFocusTitle.value = true\r\n  })\r\n}\r\n\r\nconst resetEventForm = () => {\r\n  eventForm.title = ''\r\n  eventForm.startDate = moment(calendarStore.selectedDate).format('YYYY-MM-DD')\r\n  eventForm.startTime = '09:00'\r\n  eventForm.endDate = moment(calendarStore.selectedDate).format('YYYY-MM-DD')\r\n  eventForm.endTime = '10:00'\r\n  eventForm.color = '#2979ff'\r\n  eventForm.notes = ''\r\n  eventForm.reminders = []\r\n  \r\n  autoFocusTitle.value = false\r\n}\r\n\r\nconst handleSaveEvent = async () => {\r\n  if (!eventForm.title.trim()) {\r\n    uni.showToast({\r\n      title: 'ËØ∑ËæìÂÖ•Êó•Á®ãÊ†áÈ¢ò',\r\n      icon: 'none'\r\n    })\r\n    return\r\n  }\r\n  \r\n  if (eventForm.startDate > eventForm.endDate) {\r\n    uni.showToast({\r\n      title: 'ÂºÄÂßãÊó•Êúü‰∏çËÉΩÊôö‰∫éÁªìÊùüÊó•Êúü',\r\n      icon: 'none'\r\n    })\r\n    return\r\n  }\r\n  \r\n  if (eventForm.startDate === eventForm.endDate && eventForm.startTime >= eventForm.endTime) {\r\n    uni.showToast({\r\n      title: 'ÂºÄÂßãÊó∂Èó¥‰∏çËÉΩÊôö‰∫éÊàñÁ≠â‰∫éÁªìÊùüÊó∂Èó¥',\r\n      icon: 'none'\r\n    })\r\n    return\r\n  }\r\n  \r\n  try {\r\n    if (isEditing.value && editingEventId.value) {\r\n      await calendarStore.updateEvent(editingEventId.value, eventForm)\r\n      uni.showToast({\r\n        title: 'Êó•Á®ãÂ∑≤Êõ¥Êñ∞',\r\n        icon: 'success'\r\n      })\r\n    } else {\r\n      await calendarStore.createEvent(eventForm)\r\n      uni.showToast({\r\n        title: 'Êó•Á®ãÂ∑≤Ê∑ªÂä†',\r\n        icon: 'success'\r\n      })\r\n    }\r\n    closeEventModal()\r\n  } catch (error: any) {\r\n    uni.__f__('error','at pages/index/index.vue:672','‰øùÂ≠òÊó•Á®ãÂ§±Ë¥•:', error)\r\n    uni.showToast({\r\n      title: error.message || '‰øùÂ≠òÂ§±Ë¥•ÔºåËØ∑ÈáçËØï',\r\n      icon: 'none'\r\n    })\r\n  }\r\n}\r\n\r\nconst handleDeleteEvent = async () => {\r\n  if (!editingEventId.value) return\r\n  \r\n  uni.showModal({\r\n    title: 'Á°ÆËÆ§Âà†Èô§',\r\n    content: 'Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™Êó•Á®ãÂêóÔºü',\r\n    success: async (res) => {\r\n      if (res.confirm) {\r\n        try {\r\n          await calendarStore.deleteEvent(editingEventId.value!)\r\n          uni.showToast({\r\n            title: 'Êó•Á®ãÂ∑≤Âà†Èô§',\r\n            icon: 'success'\r\n          })\r\n          closeEventModal()\r\n        } catch (error: any) {\r\n          uni.__f__('error','at pages/index/index.vue:696','Âà†Èô§Êó•Á®ãÂ§±Ë¥•:', error)\r\n          uni.showToast({\r\n            title: error.message || 'Âà†Èô§Â§±Ë¥•ÔºåËØ∑ÈáçËØï',\r\n            icon: 'none'\r\n          })\r\n        }\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nconst closeEventModal = () => {\r\n  showEventModal.value = false\r\n  resetEventForm()\r\n  isEditing.value = false\r\n  editingEventId.value = null\r\n}\r\n\r\n// ==================== ÁîüÂëΩÂë®Êúü ====================\r\n\r\nonMounted(() => {\r\n  uni.__f__('log','at pages/index/index.vue:717','üöÄ Êó•ÂéÜÂ∫îÁî®ÂêØÂä®')\r\n  \r\n  // ÊµãËØïÊèêÈÜíÊúçÂä°\r\n  uni.__f__('log','at pages/index/index.vue:720','üîî ÊèêÈÜíÊúçÂä°Áä∂ÊÄÅ:', reminderService.initialized ? 'Â∑≤ÂàùÂßãÂåñ' : 'Êú™ÂàùÂßãÂåñ')\r\n  \r\n  // ÂàùÂßãÂä†ËΩΩÊï∞ÊçÆ\r\n  calendarStore.loadEvents()\r\n  \r\n  // Âª∂ËøüÂêØÂä®ÈùôÈªòÂà∑Êñ∞\r\n  setTimeout(() => {\r\n    calendarStore.startSilentRefresh()\r\n  }, 3000)\r\n  \r\n  // ËÆæÁΩÆÊªöÂä®ÂêåÊ≠•\r\n  nextTick(() => {\r\n    setTimeout(syncScroll, 100)\r\n  })\r\n  \r\n  // ÁõëÂê¨Â∫îÁî®Áä∂ÊÄÅÂèòÂåñ\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  \r\n  // Ê£ÄÊü•ÈÄöÁü•ÁÇπÂáªËÆ∞ÂΩï\r\n  setTimeout(() => {\r\n    try {\r\n      const notification = uni.getStorageSync('lastClickedNotification')\r\n      if (notification) {\r\n        uni.__f__('log','at pages/index/index.vue:752','ÂèëÁé∞ÈÄöÁü•ÁÇπÂáªËÆ∞ÂΩï:', notification)\r\n        uni.removeStorageSync('lastClickedNotification')\r\n      }\r\n    } catch (error) {\r\n      uni.__f__('error','at pages/index/index.vue:756','Ê£ÄÊü•ÈÄöÁü•ËÆ∞ÂΩïÂ§±Ë¥•:', error)\r\n    }\r\n  }, 1000)\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n/* Êó•ÂéÜÂÆπÂô®Ê†∑Âºè */\r\n.calendar-container {\r\n  height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.custom-navbar {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 30rpx;\r\n  background-color: #fff;\r\n  border-bottom: 1rpx solid #e4e7ed;\r\n}\r\n\r\n.navbar-title {\r\n  font-size: 36rpx;\r\n  font-weight: bold;\r\n  color: #303133;\r\n}\r\n\r\n.add-btn {\r\n  background-color: #2979ff;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 10rpx;\r\n  padding: 15rpx 25rpx;\r\n  font-size: 28rpx;\r\n}\r\n\r\n.calendar-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 20rpx 30rpx;\r\n  background-color: #fff;\r\n  border-bottom: 1rpx solid #e4e7ed;\r\n  flex-wrap: wrap;\r\n  gap: 15rpx;\r\n}\r\n\r\n/* ËßÜÂõæÂàáÊç¢Âô® */\r\n.view-switcher {\r\n  display: flex;\r\n  gap: 10rpx;\r\n}\r\n\r\n.view-btn {\r\n  padding: 15rpx 25rpx;\r\n  border: 1rpx solid #dcdfe6;\r\n  border-radius: 8rpx;\r\n  background-color: #fff;\r\n  font-size: 28rpx;\r\n}\r\n\r\n.view-btn.active {\r\n  background-color: #2979ff;\r\n  color: white;\r\n  border-color: #2979ff;\r\n}\r\n\r\n/* Êó•ÊúüÂØºËà™ */\r\n.date-navigation {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 15rpx;\r\n}\r\n\r\n.nav-btn {\r\n  width: 60rpx;\r\n  height: 60rpx;\r\n  border: 1rpx solid #dcdfe6;\r\n  border-radius: 50%;\r\n  background-color: #fff;\r\n  font-size: 32rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.today-btn {\r\n  padding: 15rpx 25rpx;\r\n  border: 1rpx solid #2979ff;\r\n  border-radius: 8rpx;\r\n  background-color: #fff;\r\n  color: #2979ff;\r\n  font-size: 28rpx;\r\n}\r\n\r\n.current-date {\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  min-width: 280rpx;\r\n  text-align: center;\r\n  padding: 0 10rpx;\r\n}\r\n\r\n.calendar-body {\r\n  flex: 1;\r\n  overflow: hidden;\r\n}\r\n\r\n/* ÊúàËßÜÂõæ */\r\n.month-view {\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.weekdays-header {\r\n  display: flex;\r\n  background-color: #f8f9fa;\r\n  border-bottom: 1rpx solid #e4e7ed;\r\n}\r\n\r\n.weekday {\r\n  flex: 1;\r\n  text-align: center;\r\n  padding: 20rpx 0;\r\n  font-size: 28rpx;\r\n  color: #606266;\r\n}\r\n\r\n.month-grid {\r\n  flex: 1;\r\n  display: grid;\r\n  grid-template-columns: repeat(7, 1fr);\r\n  grid-auto-rows: 1fr;\r\n}\r\n\r\n.calendar-day {\r\n  height: 120rpx;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  position: relative;\r\n  border-bottom: 1rpx solid #f2f2f2;\r\n}\r\n\r\n.day-content-wrapper {\r\n  width: 60rpx;\r\n  height: 60rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 50%;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.today .day-content-wrapper {\r\n  background-color: #2979ff; \r\n}\r\n\r\n.today .day-number {\r\n  color: #ffffff;\r\n  font-weight: bold;\r\n}\r\n\r\n.selected:not(.today) .day-content-wrapper {\r\n  border: 2rpx solid #2979ff;\r\n}\r\n\r\n.day-number {\r\n  font-size: 28rpx;\r\n  font-weight: bold;\r\n}\r\n\r\n.lunar-day {\r\n  font-size: 20rpx;\r\n  color: #999;\r\n  margin-top: 4rpx;\r\n}\r\n\r\n.today .lunar-day {\r\n  color: #2979ff;\r\n}\r\n\r\n.event-dots {\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 4rpx;\r\n  margin-top: 6rpx;\r\n}\r\n\r\n.event-dot {\r\n  width: 8rpx;\r\n  height: 8rpx;\r\n  border-radius: 50%;\r\n}\r\n\r\n/* Âë®ËßÜÂõæ */\r\n.week-view {\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background-color: #fff;\r\n}\r\n\r\n.week-grid-container {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n}\r\n\r\n.week-header {\r\n  display: flex;\r\n  background-color: #f8f9fa;\r\n  border-bottom: 1rpx solid #e4e7ed;\r\n  height: 120rpx;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.time-header-cell {\r\n  width: 120rpx;\r\n  border-right: 1rpx solid #e4e7ed;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.day-header-cell {\r\n  flex: 1;\r\n  text-align: center;\r\n  padding: 20rpx 0;\r\n  border-right: 1rpx solid #e4e7ed;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  min-width: 0;\r\n}\r\n\r\n.day-header-cell:last-child {\r\n  border-right: none;\r\n}\r\n\r\n.day-header-cell .weekday {\r\n  font-size: 24rpx;\r\n  color: #909399;\r\n  margin-bottom: 8rpx;\r\n}\r\n\r\n.day-header-cell .date {\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  color: #303133;\r\n}\r\n\r\n.week-content {\r\n  flex: 1;\r\n  display: flex;\r\n  overflow: hidden;\r\n  min-height: 0;\r\n  position: relative;\r\n}\r\n\r\n.time-column {\r\n  width: 120rpx;\r\n  background-color: #f8f9fa;\r\n  border-right: 1rpx solid #e4e7ed;\r\n  overflow-y: auto;\r\n  flex-shrink: 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  scrollbar-width: none;\r\n  -ms-overflow-style: none;\r\n}\r\n\r\n.time-column::-webkit-scrollbar {\r\n  display: none;\r\n}\r\n\r\n.time-slot {\r\n  height: 80rpx;\r\n  display: flex;\r\n  align-items: flex-start;\r\n  justify-content: center;\r\n  padding-top: 10rpx;\r\n  border-bottom: 1rpx solid #e4e7ed;\r\n  box-sizing: border-box;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.time-label {\r\n  font-size: 24rpx;\r\n  color: #909399;\r\n  line-height: 1;\r\n}\r\n\r\n.days-content {\r\n  flex: 1;\r\n  display: flex;\r\n  overflow: auto;\r\n  min-width: 0;\r\n  overflow-x: auto;\r\n  overflow-y: auto;\r\n}\r\n\r\n.day-column {\r\n  flex: 1;\r\n  border-right: 1rpx solid #e4e7ed;\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-width: 0;\r\n  min-height: calc(80rpx * 24);\r\n}\r\n\r\n.day-column:last-child {\r\n  border-right: none;\r\n}\r\n\r\n.day-content-column {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 100%;\r\n}\r\n\r\n.time-content-slot {\r\n  height: 80rpx;\r\n  border-bottom: 1rpx solid #e4e7ed;\r\n  position: relative;\r\n  padding: 2rpx;\r\n  box-sizing: border-box;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.time-content-slot:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.events-container {\r\n  position: absolute;\r\n  left: 2rpx;\r\n  right: 2rpx;\r\n  top: 2rpx;\r\n  bottom: 2rpx;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 2rpx;\r\n  padding: 1rpx;\r\n  box-sizing: border-box;\r\n  overflow: hidden;\r\n}\r\n\r\n.week-event {\r\n  flex: 1;\r\n  padding: 4rpx 6rpx;\r\n  border-radius: 3rpx;\r\n  color: #fff;\r\n  font-size: 18rpx;\r\n  overflow: hidden;\r\n  box-shadow: 0 1rpx 2rpx rgba(0, 0, 0, 0.1);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  min-height: 0;\r\n  max-height: 50%;\r\n}\r\n\r\n.week-event.more-events {\r\n  background-color: #909399 !important;\r\n  justify-content: center;\r\n}\r\n\r\n.week-event .event-title {\r\n  font-weight: bold;\r\n  line-height: 1.2;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n  flex: 1;\r\n}\r\n\r\n.reminder-icon {\r\n  font-size: 18rpx;\r\n  opacity: 0.9;\r\n  margin-left: 4rpx;\r\n}\r\n\r\n/* Êó•ËßÜÂõæ */\r\n.day-view {\r\n  height: 100%;\r\n  background-color: #fff;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.day-header {\r\n  padding: 30rpx;\r\n  text-align: center;\r\n  border-bottom: 1rpx solid #e4e7ed;\r\n  background-color: #f8f9fa;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.day-header .date {\r\n  display: block;\r\n  font-size: 36rpx;\r\n  font-weight: bold;\r\n  margin-bottom: 10rpx;\r\n  color: #303133;\r\n}\r\n\r\n.day-header .weekday {\r\n  display: block;\r\n  font-size: 28rpx;\r\n  color: #606266;\r\n}\r\n\r\n.all-day-header {\r\n  background-color: #f8f9fa;\r\n  border-bottom: 1rpx solid #e4e7ed;\r\n  display: flex;\r\n  padding: 0;\r\n  min-height: 80rpx;\r\n}\r\n\r\n.all-day-label {\r\n  font-size: 22rpx;\r\n  color: #909399;\r\n  width: 120rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex-shrink: 0; \r\n  border-right: 1rpx solid #e4e7ed;\r\n  background-color: #f8f9fa;\r\n}\r\n\r\n.all-day-list {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8rpx;\r\n  padding: 10rpx 15rpx;\r\n  background-color: #fff;\r\n}\r\n\r\n.long-event-item {\r\n  padding: 10rpx 16rpx;\r\n  border-radius: 4rpx;\r\n  display: flex;\r\n  flex-direction: column;\r\n  box-shadow: 0 2rpx 4rpx rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.long-event-title {\r\n  font-size: 26rpx;\r\n  font-weight: bold;\r\n  color: #303133;\r\n  line-height: 1.4;\r\n}\r\n\r\n.long-event-time {\r\n  font-size: 20rpx;\r\n  color: #606266;\r\n  margin-top: 4rpx;\r\n}\r\n\r\n.day-time-grid {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n}\r\n\r\n.time-row {\r\n  display: flex;\r\n  border-bottom: 1rpx solid #e4e7ed;\r\n  min-height: 120rpx;\r\n  padding: 8rpx 0;\r\n}\r\n\r\n.time-label {\r\n  width: 120rpx;\r\n  padding: 10rpx;\r\n  text-align: center;\r\n  font-size: 24rpx;\r\n  color: #909399;\r\n  background-color: #f8f9fa;\r\n  display: flex;\r\n  align-items: flex-start;\r\n  justify-content: center;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.time-slot-content {\r\n  flex: 1;\r\n  padding: 0 10rpx;\r\n  background-color: #fff;\r\n  min-height: 100rpx;\r\n}\r\n\r\n.day-events-container {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 8rpx;\r\n  align-items: flex-start;\r\n}\r\n\r\n.day-event {\r\n  flex-shrink: 0;\r\n  width: 180rpx;\r\n  padding: 12rpx 16rpx;\r\n  border-radius: 8rpx;\r\n  color: #fff;\r\n  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.15);\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  min-height: 60rpx;\r\n  border-left: 4rpx solid rgba(255, 255, 255, 0.3);\r\n}\r\n\r\n.day-event .event-title {\r\n  font-size: 24rpx;\r\n  font-weight: bold;\r\n  margin-bottom: 4rpx;\r\n  line-height: 1.2;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n\r\n.event-time-and-reminder {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-top: 4rpx;\r\n}\r\n\r\n.day-event .event-time {\r\n  font-size: 20rpx;\r\n  opacity: 0.9;\r\n  line-height: 1.2;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n\r\n.day-reminder-icon {\r\n  font-size: 20rpx;\r\n  opacity: 0.9;\r\n}\r\n\r\n/* Ê®°ÊÄÅÊ°ÜÊ†∑Âºè */\r\n.modal-mask {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 999;\r\n}\r\n\r\n.modal-content {\r\n  background-color: #fff;\r\n  border-radius: 20rpx;\r\n  width: 90%;\r\n  max-height: 80%;\r\n  overflow-y: auto;\r\n}\r\n\r\n.modal-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 30rpx;\r\n  border-bottom: 1rpx solid #e4e7ed;\r\n}\r\n\r\n.modal-title {\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n}\r\n\r\n.close-btn {\r\n  background: none;\r\n  border: none;\r\n  font-size: 40rpx;\r\n  color: #909399;\r\n}\r\n\r\n.event-form {\r\n  padding: 30rpx;\r\n}\r\n\r\n.form-item {\r\n  margin-bottom: 30rpx;\r\n}\r\n\r\n.form-label {\r\n  display: block;\r\n  font-size: 28rpx;\r\n  color: #606266;\r\n  margin-bottom: 15rpx;\r\n}\r\n\r\n.form-input {\r\n  border: 1rpx solid #dcdfe6;\r\n  border-radius: 8rpx;\r\n  padding: 20rpx;\r\n  font-size: 28rpx;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  background-color: #fff;\r\n  min-height: 80rpx;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\ninput.form-input:focus {\r\n  border-color: #2979ff;\r\n  outline: none;\r\n}\r\n\r\n.picker-display {\r\n  display: flex;\r\n  align-items: center;\r\n  color: #303133;\r\n  background-color: #fff;\r\n}\r\n\r\n.form-textarea {\r\n  border: 1rpx solid #dcdfe6;\r\n  border-radius: 8rpx;\r\n  padding: 20rpx;\r\n  font-size: 28rpx;\r\n  width: 100%;\r\n  height: 200rpx;\r\n  box-sizing: border-box;\r\n  background-color: #fff;\r\n}\r\n\r\n.datetime-row {\r\n  display: flex;\r\n  gap: 20rpx;\r\n}\r\n\r\n.date-picker {\r\n  flex: 2;\r\n}\r\n\r\n.time-picker {\r\n  flex: 1;\r\n}\r\n\r\n/* È¢úËâ≤ÈÄâÊã©Âô® */\r\n.color-picker {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 20rpx;\r\n}\r\n\r\n.color-option {\r\n  width: 60rpx;\r\n  height: 60rpx;\r\n  border-radius: 50%;\r\n  border: 4rpx solid transparent;\r\n}\r\n\r\n.color-option.selected {\r\n  border-color: #2979ff;\r\n}\r\n\r\n/* ÊèêÈÜíÈÄâÊã©Âô®Ê†∑Âºè */\r\n.reminder-picker {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 12rpx;\r\n}\r\n\r\n.reminder-option {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 12rpx 20rpx;\r\n  border: 1rpx solid #dcdfe6;\r\n  border-radius: 8rpx;\r\n  background-color: #fff;\r\n  min-width: 140rpx;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.reminder-option:hover {\r\n  border-color: #2979ff;\r\n  transform: translateY(-2rpx);\r\n}\r\n\r\n.reminder-option.selected {\r\n  border-color: #2979ff;\r\n  background-color: rgba(41, 121, 255, 0.1);\r\n}\r\n\r\n.reminder-checkbox {\r\n  width: 32rpx;\r\n  height: 32rpx;\r\n  border: 1rpx solid #dcdfe6;\r\n  border-radius: 4rpx;\r\n  margin-right: 12rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.reminder-option.selected .reminder-checkbox {\r\n  border-color: #2979ff;\r\n  background-color: #2979ff;\r\n}\r\n\r\n.reminder-check {\r\n  color: #fff;\r\n  font-size: 24rpx;\r\n  font-weight: bold;\r\n}\r\n\r\n.reminder-label {\r\n  font-size: 24rpx;\r\n  color: #303133;\r\n}\r\n\r\n/* Â∑≤ËÆæÁΩÆÊèêÈÜíÊòæÁ§∫ */\r\n.reminders-display {\r\n  background-color: #f8f9fa;\r\n  padding: 16rpx;\r\n  border-radius: 8rpx;\r\n  border: 1rpx solid #e4e7ed;\r\n}\r\n\r\n.reminders-list {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 10rpx;\r\n  margin-top: 10rpx;\r\n}\r\n\r\n.reminder-badge {\r\n  background-color: #2979ff;\r\n  color: white;\r\n  padding: 6rpx 12rpx;\r\n  border-radius: 20rpx;\r\n  font-size: 20rpx;\r\n}\r\n\r\n.reminder-text {\r\n  font-weight: bold;\r\n}\r\n\r\n/* ÊåâÈíÆÊ†∑Âºè */\r\n.modal-actions {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 20rpx;\r\n  padding: 30rpx;\r\n  border-top: 1rpx solid #e4e7ed;\r\n}\r\n\r\n.btn {\r\n  padding: 20rpx 40rpx;\r\n  border-radius: 8rpx;\r\n  font-size: 28rpx;\r\n  border: none;\r\n}\r\n\r\n.btn-cancel {\r\n  background-color: #f4f4f5;\r\n  color: #606266;\r\n}\r\n\r\n.btn-delete {\r\n  background-color: #f56c6c;\r\n  color: white;\r\n}\r\n\r\n.btn-confirm {\r\n  background-color: #2979ff;\r\n  color: white;\r\n}\r\n\r\n/* Âä†ËΩΩÊèêÁ§∫ */\r\n.loading-mask {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: rgba(0, 0, 0, 0.3);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n}\r\n\r\n.loading-content {\r\n  background-color: white;\r\n  padding: 40rpx;\r\n  border-radius: 16rpx;\r\n  box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.loading-text {\r\n  font-size: 28rpx;\r\n  color: #606266;\r\n}\r\n</style>","import MiniProgramPage from 'D:/Ê°åÈù¢/calendar-project/calendar/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["useCalendarStore","ref","reactive","moment","computed","uni","nextTick","onMounted","reminderService"],"mappings":"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"}
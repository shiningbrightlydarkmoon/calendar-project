{"version":3,"file":"calendar.js","sources":["stores/calendar.js"],"sourcesContent":["import { defineStore } from 'pinia'\nimport { ref, computed } from 'vue'\nimport moment from 'moment'\r\nimport { Solar } from 'lunar-javascript'\n\nexport const useCalendarStore = defineStore('calendar', () => {\n  // Áä∂ÊÄÅ\n  const pageTitle = ref('ÊàëÁöÑÊó•ÂéÜ')\n  const currentView = ref('month')\n  const selectedDate = ref(moment())\n  const events = ref([])\n  const loading = ref(false)\n  const debugInfo = ref('') // Ê∑ªÂä†Ë∞ÉËØï‰ø°ÊÅØ\n  \n  // È¢úËâ≤ÈÄâÈ°π\n  const colorOptions = ref([\n    '#2979ff', '#f56c6c', '#67c23a', '#e6a23c', \n    '#909399', '#ff85c0', '#5cdbd3', '#b37feb'\n  ])\n\n  // ÁéØÂ¢ÉÈÖçÁΩÆ\n  const getBaseURL = () => {\n    // #ifdef H5\n    if (process.env.NODE_ENV === 'development') {\n      return 'http://localhost:3000' // H5ÂºÄÂèëÁéØÂ¢É‰ΩøÁî®localhost\n    } else {\n      return window.location.origin // H5Áîü‰∫ßÁéØÂ¢É‰ΩøÁî®ÂΩìÂâçÂüüÂêç\n    }\n    // #endif\n    // #ifdef MP-WEIXIN || APP-PLUS\n    return 'https://oozy-moaningly-macy.ngrok-free.dev' // Â∞èÁ®ãÂ∫è‰ΩøÁî®ngrok\r\n\t // https://oozy-moaningly-macy.ngrok-free.dev\n    // #endif\n    return 'https://oozy-moaningly-macy.ngrok-free.dev' // ÈªòËÆ§‰ΩøÁî®ngrok\n  }\n\n  // Ê£ÄÊµãÊòØÂê¶‰∏∫ ngrok ÁéØÂ¢É\n  const isNgrokEnvironment = () => {\n    const baseURL = getBaseURL()\n    return baseURL.includes('ngrok-free.dev') || baseURL.includes('ngrok.io')\n  }\n\n  // Ëé∑ÂèñÂä®ÊÄÅËØ∑Ê±ÇÂ§¥\n  const getRequestHeaders = () => {\n    const headers = {\n      'Content-Type': 'application/json'\n    }\n    \n    // Âè™ÊúâÂú® ngrok ÁéØÂ¢ÉÊâçÊ∑ªÂä†Ë∑≥ËøáÈ™åËØÅÂ§¥ÈÉ®\n    if (isNgrokEnvironment()) {\n      headers['ngrok-skip-browser-warning'] = 'true'\n      headers['X-Requested-With'] = 'XMLHttpRequest'\n    }\n    \n    return headers\n  }\n\n  // ËÆ°ÁÆóÂ±ûÊÄßÔºà‰øùÊåÅ‰∏çÂèòÔºâ\n  const displayDate = computed(() => {\n    switch (currentView.value) {\n      case 'month':\n        return selectedDate.value.format('YYYYÂπ¥MMÊúà')\n      case 'week':\n        const startOfWeek = selectedDate.value.clone().startOf('week')\n        const endOfWeek = selectedDate.value.clone().endOf('week')\n        return `${startOfWeek.format('MMÊúàDDÊó•')} - ${endOfWeek.format('MMÊúàDDÊó•')}`\n      case 'day':\n        return selectedDate.value.format('YYYYÂπ¥MMÊúàDDÊó•')\n      default:\n        return selectedDate.value.format('YYYYÂπ¥MMÊúà')\n    }\n  })\n\nconst monthDays = computed(() => {\n    const startDay = selectedDate.value.clone().startOf('month').startOf('week')\n    const endDay = selectedDate.value.clone().endOf('month').endOf('week')\n    const days = []\n    let day = startDay.clone()\n    \n    while (day.isBefore(endDay, 'day') || day.isSame(endDay, 'day')) {\n      // ÂÜúÂéÜËÆ°ÁÆóÈÄªËæë\n      const solar = Solar.fromYmd(day.year(), day.month() + 1, day.date())\n      const lunar = solar.getLunar()\n      let lunarText = lunar.getDayInChinese()\n      if (lunar.getDay() === 1) lunarText = lunar.getMonthInChinese() + 'Êúà'\n      const festival = lunar.getFestivals()[0] || lunar.getOtherFestivals()[0]\n\n      days.push({\n        date: day.clone(),\n        day: day.date(),\n        lunarDay: festival || lunarText, // ÂÜúÂéÜÊàñËäÇÊó•\n        isCurrentMonth: day.isSame(selectedDate.value, 'month'),\n        isToday: day.isSame(moment(), 'day'),\n        isSelected: day.isSame(selectedDate.value, 'day')\n      })\n      day.add(1, 'day')\n    }\n    return days\n  })\n\n  const weekDays = computed(() => {\n    const startOfWeek = selectedDate.value.clone().startOf('week')\n    const days = []\n    \n    for (let i = 0; i < 7; i++) {\n      const day = startOfWeek.clone().add(i, 'days')\n      days.push({\n        fullDate: day,\n        weekday: ['Êó•', '‰∏Ä', '‰∫å', '‰∏â', 'Âõõ', '‰∫î', 'ÂÖ≠'][i],\n        date: day.date()\n      })\n    }\n    \n    return days\n  })\n\n  // ÊñπÊ≥ïÔºà‰øùÊåÅ‰∏çÂèòÔºâ\n  const switchView = (view) => {\n    currentView.value = view\n  }\n\n  const previousPeriod = () => {\n    switch (currentView.value) {\n      case 'month':\n        selectedDate.value = selectedDate.value.clone().subtract(1, 'month') \n        break\n      case 'week':\n        selectedDate.value = selectedDate.value.clone().subtract(1, 'week')\n        break\n      case 'day':\n        selectedDate.value = selectedDate.value.clone().subtract(1, 'day')\n        break\n    }\n    loadEvents()\n  }\n\n  const nextPeriod = () => {\n    switch (currentView.value) {\n      case 'month':\n        selectedDate.value = selectedDate.value.clone().add(1, 'month')\n        break\n      case 'week':\n        selectedDate.value = selectedDate.value.clone().add(1, 'week')\n        break\n      case 'day':\n        selectedDate.value = selectedDate.value.clone().add(1, 'day')\n        break\n    }\n    loadEvents()\n  }\n\n  const goToToday = () => {\n    selectedDate.value = moment()\n    loadEvents()\n  }\n\n  const selectDate = (date) => {\n    selectedDate.value = date.clone()\n    if (currentView.value === 'month') {\n      currentView.value = 'day'\n    }\n    loadEvents()\n  }\n\n  // ‰∫ã‰ª∂Áõ∏ÂÖ≥ÊñπÊ≥ïÔºà‰øùÊåÅ‰∏çÂèòÔºâ\n  const getTimeEventsForDay = (date) => {\n    const dateStr = date.format('YYYY-MM-DD')\n    return events.value.filter(event => \n      event.startDate === dateStr || \n      event.endDate === dateStr ||\n      (event.startDate <= dateStr && event.endDate >= dateStr)\n    )\n  }\n\n  const getEventsForDayAndTime = (date, time) => {\n    const dateStr = date.format('YYYY-MM-DD')\n    return events.value.filter(event => {\n      const dateMatch = event.startDate === dateStr || \n                       event.endDate === dateStr ||\n                       (event.startDate <= dateStr && event.endDate >= dateStr)\n      \n      if (!dateMatch) return false\n      \n      if (event.startTime && event.endTime) {\n        return time >= event.startTime && time < event.endTime\n      }\n      \n      return false\n    })\n  }\n\n  // Áªü‰∏ÄÂ§ÑÁêÜ uni.request ÂìçÂ∫î\n  const handleUniResponse = (response) => {\n    let statusCode, responseData\n    \n    // H5 ÁéØÂ¢É\n    // #ifdef H5\n    statusCode = response.status\n    responseData = response.data\n    // #endif\n    \n    // ÂæÆ‰ø°Â∞èÁ®ãÂ∫èÂíåAppÁéØÂ¢É\n    // #ifdef MP-WEIXIN || APP-PLUS\n    statusCode = response.statusCode\n    responseData = response.data\n    // #endif\n    \n    // ÂÖºÂÆπÊÄßÂ§ÑÁêÜ\n    if (statusCode === undefined) {\n      statusCode = response.statusCode || response.status\n      responseData = response.data || response\n    }\n    \n    return { statusCode, responseData }\n  }\n\n  // ==================== Ë∞ÉËØïÊñπÊ≥ï ====================\n  \n  // ÂÆåÊï¥ÁöÑÁ≥ªÁªüË∞ÉËØï\n  const debugSystem = async () => {\n    const debugLog = []\n    const baseURL = getBaseURL()\n    \n    debugLog.push('üöÄ ===== ÂºÄÂßãÁ≥ªÁªüË∞ÉËØï =====')\n    debugLog.push(`üìç Âü∫Á°ÄURL: ${baseURL}`)\n    debugLog.push(`üïê Ë∞ÉËØïÊó∂Èó¥: ${new Date().toLocaleString()}`)\n    debugLog.push(`üåê ÂΩìÂâçÁéØÂ¢É: ${isNgrokEnvironment() ? 'NgrokÁéØÂ¢É' : 'Êú¨Âú∞ÁéØÂ¢É'}`)\n    \n    // #ifdef MP-WEIXIN\n    debugLog.push('üì± ËøêË°åÁéØÂ¢É: ÂæÆ‰ø°Â∞èÁ®ãÂ∫è')\n    // #endif\n    // #ifdef H5\n    debugLog.push('üåê ËøêË°åÁéØÂ¢É: H5ÁΩëÈ°µ')\n    // #endif\n    \n    try {\n      // 1. ÊµãËØïÂÅ•Â∫∑Ê£ÄÊü•\n      debugLog.push('\\nüîó ÊµãËØï1: ÂÅ•Â∫∑Ê£ÄÊü•Êé•Âè£')\n      const healthResult = await testHealth()\n      debugLog.push(`‚úÖ ÂÅ•Â∫∑Ê£ÄÊü•: ${healthResult.success ? 'ÊàêÂäü' : 'Â§±Ë¥•'}`)\n      debugLog.push(`üìä ÂìçÂ∫îÊï∞ÊçÆ: ${JSON.stringify(healthResult.data)}`)\n      \n      // 2. ÊµãËØïÁΩëÁªúËøûÊé•\n      debugLog.push('\\nüåê ÊµãËØï2: ÁΩëÁªúËøûÊé•ÊµãËØï')\n      const networkResult = await testNetwork()\n      debugLog.push(`üì∂ ÁΩëÁªúÁ±ªÂûã: ${networkResult.networkType}`)\n      \n      // 3. ÊµãËØï‰∫ã‰ª∂API\n      debugLog.push('\\nüìÖ ÊµãËØï3: ‰∫ã‰ª∂APIÊµãËØï')\n      const eventsResult = await testEventsAPI()\n      debugLog.push(`üì° APIÁä∂ÊÄÅÁ†Å: ${eventsResult.statusCode}`)\n      debugLog.push(`üì¶ ÂéüÂßãÊï∞ÊçÆÊ†ºÂºè: ${typeof eventsResult.responseData}`)\n      debugLog.push(`üî¢ Ëß£ÊûêÂêé‰∫ã‰ª∂Êï∞Èáè: ${eventsResult.parsedData.length}`)\n      \n      // 4. ÊµãËØïÊï∞ÊçÆÊ†ºÂºè\n      debugLog.push('\\nüîç ÊµãËØï4: Êï∞ÊçÆÊ†ºÂºèÂàÜÊûê')\n      if (eventsResult.responseData) {\n        debugLog.push(`üìä ÂìçÂ∫îÊï∞ÊçÆKeys: ${Object.keys(eventsResult.responseData).join(', ')}`)\n        if (Array.isArray(eventsResult.responseData)) {\n          debugLog.push('‚úÖ Êï∞ÊçÆÊ†ºÂºè: Áõ¥Êé•Êï∞ÁªÑ')\n        } else if (eventsResult.responseData.data) {\n          debugLog.push('‚úÖ Êï∞ÊçÆÊ†ºÂºè: ÂåÖÂê´dataÂ≠óÊÆµÁöÑÂØπË±°')\n        } else if (eventsResult.responseData.events) {\n          debugLog.push('‚úÖ Êï∞ÊçÆÊ†ºÂºè: ÂåÖÂê´eventsÂ≠óÊÆµÁöÑÂØπË±°')\n        } else {\n          debugLog.push('‚ùì Êï∞ÊçÆÊ†ºÂºè: Êú™Áü•Ê†ºÂºè')\n        }\n      }\n      \n      debugLog.push('\\nüéØ ===== Ë∞ÉËØïÂÆåÊàê =====')\n      \n    } catch (error) {\n      debugLog.push(`‚ùå Ë∞ÉËØïËøáÁ®ã‰∏≠Âá∫Èîô: ${error.message}`)\n    }\n    \n    // ÊâìÂç∞Âà∞ÊéßÂà∂Âè∞\n    console.log(debugLog.join('\\n'))\n    debugInfo.value = debugLog.join('\\n')\n    \n    return debugLog\n  }\n\n  // ÂÅ•Â∫∑Ê£ÄÊü•ÊµãËØï\n  const testHealth = async () => {\n    try {\n      const baseURL = getBaseURL()\n      const url = baseURL + '/health'\n      \n      const response = await new Promise((resolve, reject) => {\n        uni.request({\n          url,\n          method: 'GET',\n          timeout: 10000,\n          header: getRequestHeaders(), // ‰ΩøÁî®Âä®ÊÄÅÂ§¥ÈÉ®\n          success: (res) => resolve(res),\n          fail: (err) => reject(err)\n        })\n      })\n      \n      const { statusCode, responseData } = handleUniResponse(response)\n      \n      return {\n        success: statusCode === 200,\n        statusCode,\n        data: responseData\n      }\n    } catch (error) {\n      return {\n        success: false,\n        error: error.message\n      }\n    }\n  }\n\n  // ÁΩëÁªúËøûÊé•ÊµãËØï\n  const testNetwork = async () => {\n    return new Promise((resolve) => {\n      uni.getNetworkType({\n        success: (res) => {\n          resolve({\n            success: true,\n            networkType: res.networkType\n          })\n        },\n        fail: (err) => {\n          resolve({\n            success: false,\n            error: err.errMsg\n          })\n        }\n      })\n    })\n  }\n\n  // ‰∫ã‰ª∂APIÊµãËØï\n  const testEventsAPI = async () => {\n    try {\n      const baseURL = getBaseURL()\n      const url = baseURL + '/api/events?userId=default-user'\n      \n      const response = await new Promise((resolve, reject) => {\n        uni.request({\n          url,\n          method: 'GET',\n          timeout: 15000,\n          header: getRequestHeaders(), // ‰ΩøÁî®Âä®ÊÄÅÂ§¥ÈÉ®\n          success: (res) => resolve(res),\n          fail: (err) => reject(err)\n        })\n      })\n      \n      const { statusCode, responseData } = handleUniResponse(response)\n      \n      // Ëß£Êûê‰∫ã‰ª∂Êï∞ÊçÆ\n      let parsedData = []\n      if (Array.isArray(responseData)) {\n        parsedData = responseData\n      } else if (responseData && Array.isArray(responseData.data)) {\n        parsedData = responseData.data\n      } else if (responseData && Array.isArray(responseData.events)) {\n        parsedData = responseData.events\n      }\n      \n      return {\n        statusCode,\n        responseData,\n        parsedData,\n        parsedCount: parsedData.length\n      }\n    } catch (error) {\n      return {\n        error: error.message\n      }\n    }\n  }\n\n  // ==================== ‰∏ªË¶ÅAPIÊñπÊ≥ï ====================\n\n  const loadEvents = async () => {\n    try {\n      loading.value = true\n      \n      const baseURL = getBaseURL()\n      const url = baseURL + '/api/events?userId=default-user'\n      \n      console.log('üåê ËØ∑Ê±ÇÊó•Á®ãÊï∞ÊçÆ:', url)\n      console.log('üìã ËØ∑Ê±ÇÂ§¥:', getRequestHeaders())\n      console.log('üåç ÂΩìÂâçÁéØÂ¢É:', isNgrokEnvironment() ? 'Ngrok' : 'Êú¨Âú∞')\n      \n      const response = await new Promise((resolve, reject) => {\n        uni.request({\n          url,\n          method: 'GET',\n          timeout: 30000,\n          header: getRequestHeaders(), // ‰ΩøÁî®Âä®ÊÄÅÂ§¥ÈÉ®\n          success: (res) => resolve(res),\n          fail: (err) => reject(err)\n        })\n      })\n      \n      // Ê£ÄÊü•ÂìçÂ∫îÂÜÖÂÆπÁ±ªÂûã\n      const contentType = response.header && response.header['Content-Type'];\n      if (contentType && contentType.includes('text/html')) {\n        throw new Error('ÊúçÂä°Âô®ËøîÂõû‰∫ÜHTMLÈ°µÈù¢ËÄå‰∏çÊòØJSONÊï∞ÊçÆÔºåËØ∑Ê£ÄÊü•ngrokÈÖçÁΩÆ');\n      }\n      \n      const { statusCode, responseData } = handleUniResponse(response)\n      \n      console.log('üì° ÂìçÂ∫îÁä∂ÊÄÅ:', statusCode)\n      console.log('üì¶ ÂìçÂ∫îÊï∞ÊçÆ:', responseData)\n      \n      if (statusCode === 200) {\n        // ÁÆÄÂåñÁöÑÊï∞ÊçÆËß£Êûê\n        if (Array.isArray(responseData)) {\n          events.value = responseData\n        } else if (responseData && Array.isArray(responseData.data)) {\n          events.value = responseData.data\n        } else if (responseData && Array.isArray(responseData.events)) {\n          events.value = responseData.events\n        } else {\n          console.warn('‚ö†Ô∏è Êó†Ê≥ïËØÜÂà´ÁöÑÊï∞ÊçÆÊ†ºÂºè')\n          events.value = []\n        }\n        \n        console.log(`‚úÖ ÊàêÂäüÂä†ËΩΩ ${events.value.length} ‰∏™Êó•Á®ã`)\n      } else {\n        throw new Error(`HTTPÈîôËØØ: ${statusCode}`)\n      }\n    } catch (error) {\n      console.error('‚ùå Âä†ËΩΩ‰∫ã‰ª∂Â§±Ë¥•:', error)\n      uni.showToast({\n        title: 'Âä†ËΩΩÂ§±Ë¥•: ' + error.message,\n        icon: 'none',\n        duration: 4000\n      })\n      events.value = []\n    } finally {\n      loading.value = false\n    }\n  }\n\n  const createEvent = async (eventData) => {\n    try {\n      const baseURL = getBaseURL()\n      const url = baseURL + '/api/events'\n      \n      const response = await new Promise((resolve, reject) => {\n        uni.request({\n          url,\n          method: 'POST',\n          data: {\n            ...eventData,\n            userId: 'default-user'\n          },\n          header: getRequestHeaders(), // ‰ΩøÁî®Âä®ÊÄÅÂ§¥ÈÉ®\n          timeout: 10000,\n          success: (res) => resolve(res),\n          fail: (err) => reject(err)\n        })\n      })\n      \n      const { statusCode, responseData } = handleUniResponse(response)\n      \n      if (statusCode === 200 || statusCode === 201) {\n        if (responseData) {\n          await loadEvents()\n          return responseData.data || responseData\n        } else {\n          throw new Error('ÂàõÂª∫Êó•Á®ãÂ§±Ë¥•: ÂìçÂ∫îÊï∞ÊçÆ‰∏∫Á©∫')\n        }\n      } else {\n        throw new Error(`HTTPÈîôËØØ: ${statusCode}`)\n      }\n    } catch (error) {\n      console.error('‚ùå ÂàõÂª∫‰∫ã‰ª∂Â§±Ë¥•:', error)\n      throw error\n    }\n  }\n\n  const updateEvent = async (eventId, eventData) => {\n    try {\n      const baseURL = getBaseURL()\n      const url = baseURL + `/api/events/${eventId}`\n      \n      const response = await new Promise((resolve, reject) => {\n        uni.request({\n          url,\n          method: 'PUT',\n          data: eventData,\n          header: getRequestHeaders(), // ‰ΩøÁî®Âä®ÊÄÅÂ§¥ÈÉ®\n          timeout: 10000,\n          success: (res) => resolve(res),\n          fail: (err) => reject(err)\n        })\n      })\n      \n      const { statusCode, responseData } = handleUniResponse(response)\n      \n      if (statusCode === 200) {\n        if (responseData) {\n          await loadEvents()\n          return responseData.data || responseData\n        } else {\n          throw new Error('Êõ¥Êñ∞Êó•Á®ãÂ§±Ë¥•: ÂìçÂ∫îÊï∞ÊçÆ‰∏∫Á©∫')\n        }\n      } else {\n        throw new Error(`HTTPÈîôËØØ: ${statusCode}`)\n      }\n    } catch (error) {\n      console.error('‚ùå Êõ¥Êñ∞‰∫ã‰ª∂Â§±Ë¥•:', error)\n      throw error\n    }\n  }\n\n  const deleteEvent = async (eventId) => {\n    try {\n      const baseURL = getBaseURL()\n      const url = baseURL + `/api/events/${eventId}`\n      \n      const response = await new Promise((resolve, reject) => {\n        uni.request({\n          url,\n          method: 'DELETE',\n          header: getRequestHeaders(), // ‰ΩøÁî®Âä®ÊÄÅÂ§¥ÈÉ®\n          timeout: 10000,\n          success: (res) => resolve(res),\n          fail: (err) => reject(err)\n        })\n      })\n      \n      const { statusCode, responseData } = handleUniResponse(response)\n      \n      if (statusCode === 200) {\n        if (responseData) {\n          await loadEvents()\n        } else {\n          throw new Error('Âà†Èô§Êó•Á®ãÂ§±Ë¥•: ÂìçÂ∫îÊï∞ÊçÆ‰∏∫Á©∫')\n        }\n      } else {\n        throw new Error(`HTTPÈîôËØØ: ${statusCode}`)\n      }\n    } catch (error) {\n      console.error('‚ùå Âà†Èô§‰∫ã‰ª∂Â§±Ë¥•:', error)\n      throw error\n    }\n  }\n\n  return {\n    // Áä∂ÊÄÅ\n    pageTitle,\n    currentView,\n    selectedDate,\n    events,\n    loading,\n    colorOptions,\n    debugInfo,\n    \n    // ËÆ°ÁÆóÂ±ûÊÄß\n    displayDate,\n    monthDays,\n    weekDays,\n    \n    // ÊñπÊ≥ï\n    switchView,\n    previousPeriod,\n    nextPeriod,\n    goToToday,\n    selectDate,\n    getTimeEventsForDay,\n    getEventsForDayAndTime,\n    loadEvents,\n    createEvent,\n    updateEvent,\n    deleteEvent,\n    \n    // Ë∞ÉËØïÊñπÊ≥ï\n    debugSystem,\n    testHealth,\n    testNetwork,\n    testEventsAPI,\n    \n    // Â∑•ÂÖ∑ÊñπÊ≥ï\n    isNgrokEnvironment,\n    getRequestHeaders\n  }\n})"],"names":["defineStore","ref","moment","computed","Solar","uni"],"mappings":"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"}
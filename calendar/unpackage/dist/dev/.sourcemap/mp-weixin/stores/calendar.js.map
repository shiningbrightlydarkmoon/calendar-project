{"version":3,"file":"calendar.js","sources":["stores/calendar.js"],"sourcesContent":["import { defineStore } from 'pinia'\nimport { ref, computed } from 'vue'\nimport moment from 'moment'\nimport { Solar } from 'lunar-javascript'\nimport reminderService from '@/utils/reminder.js'\n\nexport const useCalendarStore = defineStore('calendar', () => {\n  // Áä∂ÊÄÅ\n  const pageTitle = ref('ÊàëÁöÑÊó•ÂéÜ')\n  const currentView = ref('month')\n  const selectedDate = ref(moment())\n  const events = ref([])\n  const loading = ref(false)\n  const debugInfo = ref('')\n  \n  // ‰ºòÂåñÔºöÊ∑ªÂä†ÁºìÂ≠òÂíåÁä∂ÊÄÅÁÆ°ÁêÜ\n  const isFetching = ref(false)\n  const lastMonthKey = ref('')\n  const cachedMonthData = ref(null)\n  const eventsCache = ref({}) // ÊåâÊó•ÊúüÁºìÂ≠ò‰∫ã‰ª∂\n  const lastFetchTime = ref(0)\n  \n  // È¢úËâ≤ÈÄâÈ°π\n  const colorOptions = ref([\n    '#2979ff', '#f56c6c', '#67c23a', '#e6a23c', \n    '#909399', '#ff85c0', '#5cdbd3', '#b37feb'\n  ])\n  \n  // ÊèêÈÜíÈÄâÈ°πÈÖçÁΩÆÔºàÁÆÄÂåñÁâàÔºâ\n  const reminderOptions = ref([\n    { label: 'ÂáÜÊó∂', value: 0 },\n    { label: '5ÂàÜÈíüÂâç', value: 5 },\n    { label: '10ÂàÜÈíüÂâç', value: 10 },\n    { label: '15ÂàÜÈíüÂâç', value: 15 },\n    { label: '30ÂàÜÈíüÂâç', value: 30 },\n    { label: '1Â∞èÊó∂Ââç', value: 60 },\n    { label: '2Â∞èÊó∂Ââç', value: 120 },\n    { label: '1Â§©Ââç', value: 1440 },\n    { label: '2Â§©Ââç', value: 2880 },\n    { label: '1Âë®Ââç', value: 10080 }\n  ])\n\n  // ==================== ÁéØÂ¢ÉÈÖçÁΩÆ ====================\n  const getBaseURL = () => {\n    // #ifdef H5\n    if (process.env.NODE_ENV === 'development') {\n      return 'http://localhost:3000'\n    } else {\n      return window.location.origin\n    }\n    // #endif\n    // #ifdef MP-WEIXIN || APP-PLUS\n    return 'https://oozy-moaningly-macy.ngrok-free.dev'\n    // #endif\n    return 'https://oozy-moaningly-macy.ngrok-free.dev'\n  }\n\n  const isNgrokEnvironment = () => {\n    const baseURL = getBaseURL()\n    return baseURL.includes('ngrok-free.dev') || baseURL.includes('ngrok.io')\n  }\n\n  const getRequestHeaders = () => {\n    const headers = {\n      'Content-Type': 'application/json'\n    }\n    \n    if (isNgrokEnvironment()) {\n      headers['ngrok-skip-browser-warning'] = 'true'\n      headers['X-Requested-With'] = 'XMLHttpRequest'\n    }\n    \n    return headers\n  }\n\n  // ==================== ËÆ°ÁÆóÂ±ûÊÄß‰ºòÂåñ ====================\n  const displayDate = computed(() => {\n    switch (currentView.value) {\n      case 'month':\n        return selectedDate.value.format('YYYYÂπ¥MMÊúà')\n      case 'week':\n        const startOfWeek = selectedDate.value.clone().startOf('week')\n        const endOfWeek = selectedDate.value.clone().endOf('week')\n        return `${startOfWeek.format('MMÊúàDDÊó•')} - ${endOfWeek.format('MMÊúàDDÊó•')}`\n      case 'day':\n        return selectedDate.value.format('YYYYÂπ¥MMÊúàDDÊó•')\n      default:\n        return selectedDate.value.format('YYYYÂπ¥MMÊúà')\n    }\n  })\n\n  // ‰ºòÂåñÔºöÂ¶ÇÊûú selectedDate ÁöÑÊúà‰ªΩÊ≤°ÂèòÔºåÂ∞±‰∏çÈúÄË¶ÅÈáçÊñ∞ËÆ°ÁÆó monthDays\n  const monthDays = computed(() => {\n    const currentMonthKey = selectedDate.value.format('YYYY-MM')\n    \n    // Â¶ÇÊûúÊúà‰ªΩÊ≤°ÂèòÔºåËøîÂõûÁºìÂ≠òÁöÑÊúà‰ªΩÊï∞ÊçÆ\n    if (currentMonthKey === lastMonthKey.value && cachedMonthData.value) {\n      return cachedMonthData.value\n    }\n    \n    // ÈáçÊñ∞ËÆ°ÁÆóÊúà‰ªΩÊï∞ÊçÆ\n    const startDay = selectedDate.value.clone().startOf('month').startOf('week')\n    const endDay = selectedDate.value.clone().endOf('month').endOf('week')\n    const days = []\n    let day = startDay.clone()\n    \n    while (day.isBefore(endDay, 'day') || day.isSame(endDay, 'day')) {\n      // ÂÜúÂéÜËÆ°ÁÆóÈÄªËæë\n      const solar = Solar.fromYmd(day.year(), day.month() + 1, day.date())\n      const lunar = solar.getLunar()\n      let lunarText = lunar.getDayInChinese()\n      if (lunar.getDay() === 1) lunarText = lunar.getMonthInChinese() + 'Êúà'\n      const festival = lunar.getFestivals()[0] || lunar.getOtherFestivals()[0]\n\n      days.push({\n        date: day.clone(),\n        day: day.date(),\n        lunarDay: festival || lunarText,\n        isCurrentMonth: day.isSame(selectedDate.value, 'month'),\n        isToday: day.isSame(moment(), 'day'),\n        isSelected: day.isSame(selectedDate.value, 'day'),\n        dateStr: day.format('YYYY-MM-DD')\n      })\n      day.add(1, 'day')\n    }\n    \n    // ÁºìÂ≠òËÆ°ÁÆóÁªìÊûú\n    lastMonthKey.value = currentMonthKey\n    cachedMonthData.value = days\n    \n    return days\n  })\n\n  const weekDays = computed(() => {\n    const startOfWeek = selectedDate.value.clone().startOf('week')\n    const days = []\n    \n    for (let i = 0; i < 7; i++) {\n      const day = startOfWeek.clone().add(i, 'days')\n      days.push({\n        fullDate: day,\n        weekday: ['Êó•', '‰∏Ä', '‰∫å', '‰∏â', 'Âõõ', '‰∫î', 'ÂÖ≠'][i],\n        date: day.date(),\n        dateStr: day.format('YYYY-MM-DD')\n      })\n    }\n    \n    return days\n  })\n\n  // ==================== ‰∫ã‰ª∂Êï∞ÊçÆÁºìÂ≠ò‰ºòÂåñ ====================\n  // ÊûÑÂª∫‰∫ã‰ª∂ÁºìÂ≠ò\n  const buildEventsCache = () => {\n    eventsCache.value = {}\n    \n    events.value.forEach(event => {\n      const startMoment = moment(event.startDate)\n      const endMoment = moment(event.endDate)\n      let current = startMoment.clone()\n      \n      while (current.isSameOrBefore(endMoment, 'day')) {\n        const dateStr = current.format('YYYY-MM-DD')\n        if (!eventsCache.value[dateStr]) {\n          eventsCache.value[dateStr] = []\n        }\n        eventsCache.value[dateStr].push(event)\n        current.add(1, 'day')\n      }\n    })\n  }\n\n  // Ëé∑ÂèñÊüêÂ§©ÁöÑ‰∫ã‰ª∂ÔºàÂ∏¶ÁºìÂ≠òÔºâ\n  const getTimeEventsForDay = (date) => {\n    const dateStr = moment(date).format('YYYY-MM-DD')\n    return eventsCache.value[dateStr] || []\n  }\n\n  // ÊåâÊó∂Èó¥ÊßΩËé∑Âèñ‰∫ã‰ª∂\n  const getEventsForTimeSlot = (date, time) => {\n    const dateStr = moment(date).format('YYYY-MM-DD')\n    const eventsForDate = eventsCache.value[dateStr] || []\n    \n    return eventsForDate.filter(event => {\n      const isSingleDay = event.startDate === event.endDate\n      const isNotAllDay = !event.isAllDay\n      const timeMatch = time >= event.startTime && time < event.endTime\n      \n      return isSingleDay && isNotAllDay && event.startDate === dateStr && timeMatch\n    })\n  }\n\n  // Èïø‰∫ã‰ª∂Ëé∑Âèñ\n  const getLongEventsForDay = (date) => {\n    const dateStr = moment(date).format('YYYY-MM-DD')\n    const eventsForDate = eventsCache.value[dateStr] || []\n    \n    return eventsForDate.filter(event => {\n      const isMultiDay = event.startDate !== event.endDate\n      const isAllDay = event.isAllDay === true\n      const isWithinRange = dateStr >= event.startDate && dateStr <= event.endDate\n      \n      return (isMultiDay || isAllDay) && isWithinRange\n    })\n  }\n\n  // ==================== ËßÜÂõæÂàáÊç¢ÊñπÊ≥ï ====================\n  const switchView = (view) => {\n    currentView.value = view\n  }\n\n  const previousPeriod = () => {\n    switch (currentView.value) {\n      case 'month':\n        selectedDate.value = selectedDate.value.clone().subtract(1, 'month') \n        break\n      case 'week':\n        selectedDate.value = selectedDate.value.clone().subtract(1, 'week')\n        break\n      case 'day':\n        selectedDate.value = selectedDate.value.clone().subtract(1, 'day')\n        break\n    }\n  }\n\n  const nextPeriod = () => {\n    switch (currentView.value) {\n      case 'month':\n        selectedDate.value = selectedDate.value.clone().add(1, 'month')\n        break\n      case 'week':\n        selectedDate.value = selectedDate.value.clone().add(1, 'week')\n        break\n      case 'day':\n        selectedDate.value = selectedDate.value.clone().add(1, 'day')\n        break\n    }\n  }\n\n  const goToToday = () => {\n    selectedDate.value = moment()\n  }\n\n  const selectDate = (date) => {\n    selectedDate.value = date.clone()\n  }\n\n  // ==================== ÈùôÈªòÊï∞ÊçÆÂä†ËΩΩ ====================\n  // ÈùôÈªòÂä†ËΩΩÔºà‰∏çÊòæÁ§∫loadingÁä∂ÊÄÅÔºâ\n  const loadEventsSilently = async () => {\n    if (isFetching.value) return\n    \n    // Èò≤ÊäñÔºöÈÅøÂÖçÈ¢ëÁπÅË∞ÉÁî®\n    const now = Date.now()\n    if (now - lastFetchTime.value < 2000) {\n      return\n    }\n    \n    try {\n      isFetching.value = true\n      lastFetchTime.value = now\n      \n      const baseURL = getBaseURL()\n      const url = baseURL + '/api/events?userId=default-user'\n      \n      const response = await new Promise((resolve, reject) => {\n        uni.request({\n          url,\n          method: 'GET',\n          timeout: 10000,\n          header: getRequestHeaders(),\n          success: (res) => resolve(res),\n          fail: (err) => reject(err)\n        })\n      })\n      \n      const { statusCode, responseData } = handleUniResponse(response)\n      \n      if (statusCode === 200) {\n        let newEvents = []\n        \n        // Ëß£Êûê‰∫ã‰ª∂Êï∞ÊçÆ\n        if (Array.isArray(responseData)) {\n          newEvents = responseData\n        } else if (responseData && Array.isArray(responseData.data)) {\n          newEvents = responseData.data\n        } else if (responseData && Array.isArray(responseData.events)) {\n          newEvents = responseData.events\n        }\n        \n        // Âè™ÊúâÂú®Êï∞ÊçÆÂèòÂåñÊó∂ÊâçÊõ¥Êñ∞\n        if (JSON.stringify(events.value) !== JSON.stringify(newEvents)) {\n          events.value = newEvents\n          buildEventsCache() // Êõ¥Êñ∞ÁºìÂ≠ò\n          console.log(`‚úÖ ÈùôÈªòÊõ¥Êñ∞ ${newEvents.length} ‰∏™Êó•Á®ã`)\n        }\n      }\n    } catch (error) {\n      console.error('ÈùôÈªòÂä†ËΩΩÂ§±Ë¥•:', error)\n    } finally {\n      isFetching.value = false\n    }\n  }\n\n  // ‰∏ªÂä†ËΩΩÊñπÊ≥ï - ÊòæÁ§∫Âä†ËΩΩÁä∂ÊÄÅ\n  const loadEvents = async () => {\n    try {\n      loading.value = true\n      \n      const baseURL = getBaseURL()\n      const url = baseURL + '/api/events?userId=default-user'\n      \n      console.log('ËØ∑Ê±ÇÊó•Á®ãÊï∞ÊçÆ:', url)\n      console.log('ËØ∑Ê±ÇÂ§¥:', getRequestHeaders())\n      console.log('ÂΩìÂâçÁéØÂ¢É:', isNgrokEnvironment() ? 'Ngrok' : 'Êú¨Âú∞')\n      \n      const response = await new Promise((resolve, reject) => {\n        uni.request({\n          url,\n          method: 'GET',\n          timeout: 30000,\n          header: getRequestHeaders(),\n          success: (res) => resolve(res),\n          fail: (err) => reject(err)\n        })\n      })\n      \n      // Ê£ÄÊü•ÂìçÂ∫îÂÜÖÂÆπÁ±ªÂûã\n      const contentType = response.header && response.header['Content-Type'];\n      if (contentType && contentType.includes('text/html')) {\n        throw new Error('ÊúçÂä°Âô®ËøîÂõû‰∫ÜHTMLÈ°µÈù¢ËÄå‰∏çÊòØJSONÊï∞ÊçÆÔºåËØ∑Ê£ÄÊü•ngrokÈÖçÁΩÆ');\n      }\n      \n      const { statusCode, responseData } = handleUniResponse(response)\n      \n      console.log('ÂìçÂ∫îÁä∂ÊÄÅ:', statusCode)\n      console.log('ÂìçÂ∫îÊï∞ÊçÆ:', responseData)\n      \n      if (statusCode === 200) {\n        // ÁÆÄÂåñÁöÑÊï∞ÊçÆËß£Êûê\n        let newEvents = []\n        if (Array.isArray(responseData)) {\n          newEvents = responseData\n        } else if (responseData && Array.isArray(responseData.data)) {\n          newEvents = responseData.data\n        } else if (responseData && Array.isArray(responseData.events)) {\n          newEvents = responseData.events\n        } else {\n          console.warn('Êó†Ê≥ïËØÜÂà´ÁöÑÊï∞ÊçÆÊ†ºÂºè')\n          newEvents = []\n        }\n        \n        events.value = newEvents\n        buildEventsCache() // ÊûÑÂª∫ÁºìÂ≠ò\n        console.log(`ÊàêÂäüÂä†ËΩΩ ${events.value.length} ‰∏™Êó•Á®ã`)\n      } else {\n        throw new Error(`HTTPÈîôËØØ: ${statusCode}`)\n      }\n    } catch (error) {\n      console.error('Âä†ËΩΩ‰∫ã‰ª∂Â§±Ë¥•:', error)\n      uni.showToast({\n        title: 'Âä†ËΩΩÂ§±Ë¥•: ' + error.message,\n        icon: 'none',\n        duration: 4000\n      })\n      events.value = []\n    } finally {\n      loading.value = false\n    }\n  }\n\n  // ÂêØÂä®ÈùôÈªòÂà∑Êñ∞\n  const startSilentRefresh = () => {\n    console.log('‚è∞ ÂêØÂä®ÈùôÈªòÂà∑Êñ∞')\n    \n    // ÊØè5ÂàÜÈíüÈùôÈªòÂà∑Êñ∞‰∏ÄÊ¨°\n    setInterval(() => {\n      if (!loading.value) {\n        loadEventsSilently()\n      }\n    }, 5 * 60 * 1000)\n    \n    // ÁõëÂê¨Â∫îÁî®Áä∂ÊÄÅÂèòÂåñ\n    // #ifdef H5\n    document.addEventListener('visibilitychange', () => {\n      if (!document.hidden) {\n        console.log('üì± Â∫îÁî®ÂõûÂà∞ÂâçÂè∞ÔºåÈùôÈªòÂà∑Êñ∞Êï∞ÊçÆ')\n        setTimeout(() => {\n          loadEventsSilently()\n        }, 1000)\n      }\n    })\n    // #endif\n  }\n\n  // ==================== ‰∫ã‰ª∂Â¢ûÂà†ÊîπÔºàÊîØÊåÅÊèêÈÜíÔºâ ====================\n  const createEvent = async (eventData) => {\n    try {\n      const baseURL = getBaseURL()\n      const url = baseURL + '/api/events'\n      \n      const response = await new Promise((resolve, reject) => {\n        uni.request({\n          url,\n          method: 'POST',\n          data: {\n            ...eventData,\n            userId: 'default-user'\n          },\n          header: getRequestHeaders(),\n          timeout: 10000,\n          success: (res) => resolve(res),\n          fail: (err) => reject(err)\n        })\n      })\n      \n      const { statusCode, responseData } = handleUniResponse(response)\n      \n      if (statusCode === 200 || statusCode === 201) {\n        if (!responseData) {\n          throw new Error('ÂàõÂª∫Êó•Á®ãÂ§±Ë¥•: ÂìçÂ∫îÊï∞ÊçÆ‰∏∫Á©∫')\n        }\n\n        const result = responseData.data || responseData\n        \n        // 1. ÈùôÈªòÂä†ËΩΩÊúÄÊñ∞Êï∞ÊçÆ\n        setTimeout(() => {\n          loadEventsSilently()\n        }, 500)\n        \n        // 2. ËÆæÁΩÆÂ§ö‰∏™ÊèêÈÜí\n        if (eventData.reminders && eventData.reminders.length > 0) {\n          console.log(`üìÖ ‰∏∫Êó•Á®ã \"${result.title}\" ËÆæÁΩÆ ${eventData.reminders.length} ‰∏™ÊèêÈÜí`)\n          \n          // ‰∏∫ÊØè‰∏™ÊèêÈÜíÊó∂Èó¥ËÆæÁΩÆÈÄöÁü•\n          for (const reminderMinutes of eventData.reminders) {\n            const reminderResult = {\n              ...result,\n              reminderMinutes: reminderMinutes\n            }\n            \n            await reminderService.createLocalNotification(reminderResult)\n          }\n        } else {\n          console.log('‚è∞ Êú™ËÆæÁΩÆÊèêÈÜí')\n        }\n        \n        return result\n      } else {\n        throw new Error(`HTTPÈîôËØØ: ${statusCode}`)\n      }\n    } catch (error) {\n      console.error('ÂàõÂª∫‰∫ã‰ª∂Â§±Ë¥•:', error)\n      throw error\n    }\n  }\n\n  const updateEvent = async (eventId, eventData) => {\n    try {\n      const baseURL = getBaseURL()\n      const url = baseURL + `/api/events/${eventId}`\n      \n      const response = await new Promise((resolve, reject) => {\n        uni.request({\n          url,\n          method: 'PUT',\n          data: eventData,\n          header: getRequestHeaders(),\n          timeout: 10000,\n          success: (res) => resolve(res),\n          fail: (err) => reject(err)\n        })\n      })\n      \n      const { statusCode, responseData } = handleUniResponse(response)\n      \n      // ÂÖàÂèñÊ∂àÊâÄÊúâÊóßÁöÑÊèêÈÜí\n      reminderService.cancelNotification(eventId)\n      \n      // ËÆæÁΩÆÊñ∞ÁöÑÊèêÈÜí\n      if (eventData.reminders && eventData.reminders.length > 0) {\n        console.log(`üìÖ Êõ¥Êñ∞Êó•Á®ãÊèêÈÜíÔºåËÆæÁΩÆ ${eventData.reminders.length} ‰∏™ÊèêÈÜí`)\n        \n        const updatedEvent = { ...eventData, _id: eventId }\n        \n        // ‰∏∫ÊØè‰∏™ÊèêÈÜíÊó∂Èó¥ËÆæÁΩÆÈÄöÁü•\n        for (const reminderMinutes of eventData.reminders) {\n          const reminderEvent = {\n            ...updatedEvent,\n            reminderMinutes: reminderMinutes\n          }\n          \n          await reminderService.createLocalNotification(reminderEvent)\n        }\n      }\n      \n      // ÈùôÈªòÂà∑Êñ∞Êï∞ÊçÆ\n      setTimeout(() => {\n        loadEventsSilently()\n      }, 500)\n      \n      if (statusCode === 200) {\n        if (responseData) {\n          return responseData.data || responseData\n        } else {\n          throw new Error('Êõ¥Êñ∞Êó•Á®ãÂ§±Ë¥•: ÂìçÂ∫îÊï∞ÊçÆ‰∏∫Á©∫')\n        }\n      } else {\n        throw new Error(`HTTPÈîôËØØ: ${statusCode}`)\n      }\n    } catch (error) {\n      console.error('Êõ¥Êñ∞‰∫ã‰ª∂Â§±Ë¥•:', error)\n      throw error\n    }\n  }\n\n  const deleteEvent = async (eventId) => {\n    try {\n      const baseURL = getBaseURL()\n      const url = baseURL + `/api/events/${eventId}`\n      \n      const response = await new Promise((resolve, reject) => {\n        uni.request({\n          url,\n          method: 'DELETE',\n          header: getRequestHeaders(),\n          timeout: 10000,\n          success: (res) => resolve(res),\n          fail: (err) => reject(err)\n        })\n      })\n      \n      const { statusCode, responseData } = handleUniResponse(response)\n      \n      // ÂèñÊ∂àËØ•‰∫ã‰ª∂ÁöÑÊâÄÊúâÊèêÈÜí\n      reminderService.cancelNotification(eventId)\n      \n      // ÈùôÈªòÂà∑Êñ∞Êï∞ÊçÆ\n      setTimeout(() => {\n        loadEventsSilently()\n      }, 500)\n      \n      if (statusCode === 200) {\n        if (responseData) {\n          return responseData.data || responseData\n        } else {\n          throw new Error('Âà†Èô§Êó•Á®ãÂ§±Ë¥•: ÂìçÂ∫îÊï∞ÊçÆ‰∏∫Á©∫')\n        }\n      } else {\n        throw new Error(`HTTPÈîôËØØ: ${statusCode}`)\n      }\n    } catch (error) {\n      console.error('Âà†Èô§‰∫ã‰ª∂Â§±Ë¥•:', error)\n      throw error\n    }\n  }\n\n  // ==================== Â∑•ÂÖ∑ÊñπÊ≥ï ====================\n  const handleUniResponse = (response) => {\n    let statusCode, responseData\n    \n    // H5 ÁéØÂ¢É\n    // #ifdef H5\n    statusCode = response.status\n    responseData = response.data\n    // #endif\n    \n    // ÂæÆ‰ø°Â∞èÁ®ãÂ∫èÂíåAppÁéØÂ¢É\n    // #ifdef MP-WEIXIN || APP-PLUS\n    statusCode = response.statusCode\n    responseData = response.data\n    // #endif\n    \n    // ÂÖºÂÆπÊÄßÂ§ÑÁêÜ\n    if (statusCode === undefined) {\n      statusCode = response.statusCode || response.status\n      responseData = response.data || response\n    }\n    \n    return { statusCode, responseData }\n  }\n\n  // Ë∞ÉËØïÊñπÊ≥ï\n  const debugSystem = async () => {\n    const debugLog = []\n    const baseURL = getBaseURL()\n    \n    debugLog.push('üöÄ ===== ÂºÄÂßãÁ≥ªÁªüË∞ÉËØï =====')\n    debugLog.push(`üìç Âü∫Á°ÄURL: ${baseURL}`)\n    debugLog.push(`üïê Ë∞ÉËØïÊó∂Èó¥: ${new Date().toLocaleString()}`)\n    debugLog.push(`üåê ÂΩìÂâçÁéØÂ¢É: ${isNgrokEnvironment() ? 'NgrokÁéØÂ¢É' : 'Êú¨Âú∞ÁéØÂ¢É'}`)\n    \n    // #ifdef MP-WEIXIN\n    debugLog.push('üì± ËøêË°åÁéØÂ¢É: ÂæÆ‰ø°Â∞èÁ®ãÂ∫è')\n    // #endif\n    // #ifdef H5\n    debugLog.push('üåê ËøêË°åÁéØÂ¢É: H5ÁΩëÈ°µ')\n    // #endif\n    \n    try {\n      // 1. ÊµãËØïÂÅ•Â∫∑Ê£ÄÊü•\n      debugLog.push('\\nüîó ÊµãËØï1: ÂÅ•Â∫∑Ê£ÄÊü•Êé•Âè£')\n      const healthResult = await testHealth()\n      debugLog.push(`‚úÖ ÂÅ•Â∫∑Ê£ÄÊü•: ${healthResult.success ? 'ÊàêÂäü' : 'Â§±Ë¥•'}`)\n      debugLog.push(`üìä ÂìçÂ∫îÊï∞ÊçÆ: ${JSON.stringify(healthResult.data)}`)\n      \n      // 2. ÊµãËØïÁΩëÁªúËøûÊé•\n      debugLog.push('\\nüåê ÊµãËØï2: ÁΩëÁªúËøûÊé•ÊµãËØï')\n      const networkResult = await testNetwork()\n      debugLog.push(`üì∂ ÁΩëÁªúÁ±ªÂûã: ${networkResult.networkType}`)\n      \n      // 3. ÊµãËØï‰∫ã‰ª∂API\n      debugLog.push('\\nüìÖ ÊµãËØï3: ‰∫ã‰ª∂APIÊµãËØï')\n      const eventsResult = await testEventsAPI()\n      debugLog.push(`üì° APIÁä∂ÊÄÅÁ†Å: ${eventsResult.statusCode}`)\n      debugLog.push(`üì¶ ÂéüÂßãÊï∞ÊçÆÊ†ºÂºè: ${typeof eventsResult.responseData}`)\n      debugLog.push(`üî¢ Ëß£ÊûêÂêé‰∫ã‰ª∂Êï∞Èáè: ${eventsResult.parsedData.length}`)\n      \n      // 4. ÊèêÈÜíÊúçÂä°Áä∂ÊÄÅ\n      debugLog.push('\\nüîî ÊµãËØï4: ÊèêÈÜíÊúçÂä°Áä∂ÊÄÅ')\n      const reminders = reminderService.getAllScheduledNotifications()\n      debugLog.push(`üìä ÊèêÈÜíÊÄªÊï∞: ${reminders.total}`)\n      debugLog.push(`‚è≥ Âç≥Â∞ÜËß¶Âèë: ${reminders.upcoming.length}`)\n      debugLog.push(`‚úÖ Â∑≤Ëß¶Âèë: ${reminders.past.length}`)\n      \n      debugLog.push('\\nüéØ ===== Ë∞ÉËØïÂÆåÊàê =====')\n      \n    } catch (error) {\n      debugLog.push(`‚ùå Ë∞ÉËØïËøáÁ®ã‰∏≠Âá∫Èîô: ${error.message}`)\n    }\n    \n    // ÊâìÂç∞Âà∞ÊéßÂà∂Âè∞\n    console.log(debugLog.join('\\n'))\n    debugInfo.value = debugLog.join('\\n')\n    \n    return debugLog\n  }\n\n  // Ë∞ÉËØïÊèêÈÜí\n  const debugReminders = () => {\n    console.log('üîî ÂΩìÂâçÊâÄÊúâÊèêÈÜí:')\n    const reminders = reminderService.getAllScheduledNotifications()\n    console.log(`ÊÄªËÆ°: ${reminders.total} ‰∏™ÊèêÈÜí`)\n    \n    if (reminders.upcoming.length > 0) {\n      console.log('‚è≥ Âç≥Â∞ÜËß¶ÂèëÁöÑÊèêÈÜí:')\n      reminders.upcoming.forEach(reminder => {\n        console.log(`  üìÖ ${reminder.title} - ${reminder.reminderText} (${reminder.minutesLeft}ÂàÜÈíüÂêé)`)\n      })\n    }\n    \n    if (reminders.past.length > 0) {\n      console.log('‚úÖ Â∑≤Ëß¶ÂèëÁöÑÊèêÈÜí:')\n      reminders.past.forEach(reminder => {\n        console.log(`  üìÖ ${reminder.title} - ${reminder.reminderText}`)\n      })\n    }\n  }\n\n  const testHealth = async () => {\n    try {\n      const baseURL = getBaseURL()\n      const url = baseURL + '/health'\n      \n      const response = await new Promise((resolve, reject) => {\n        uni.request({\n          url,\n          method: 'GET',\n          timeout: 10000,\n          header: getRequestHeaders(),\n          success: (res) => resolve(res),\n          fail: (err) => reject(err)\n        })\n      })\n      \n      const { statusCode, responseData } = handleUniResponse(response)\n      \n      return {\n        success: statusCode === 200,\n        statusCode,\n        data: responseData\n      }\n    } catch (error) {\n      return {\n        success: false,\n        error: error.message\n      }\n    }\n  }\n\n  const testNetwork = async () => {\n    return new Promise((resolve) => {\n      uni.getNetworkType({\n        success: (res) => {\n          resolve({\n            success: true,\n            networkType: res.networkType\n          })\n        },\n        fail: (err) => {\n          resolve({\n            success: false,\n            error: err.errMsg\n          })\n        }\n      })\n    })\n  }\n\n  const testEventsAPI = async () => {\n    try {\n      const baseURL = getBaseURL()\n      const url = baseURL + '/api/events?userId=default-user'\n      \n      const response = await new Promise((resolve, reject) => {\n        uni.request({\n          url,\n          method: 'GET',\n          timeout: 15000,\n          header: getRequestHeaders(),\n          success: (res) => resolve(res),\n          fail: (err) => reject(err)\n        })\n      })\n      \n      const { statusCode, responseData } = handleUniResponse(response)\n      \n      // Ëß£Êûê‰∫ã‰ª∂Êï∞ÊçÆ\n      let parsedData = []\n      if (Array.isArray(responseData)) {\n        parsedData = responseData\n      } else if (responseData && Array.isArray(responseData.data)) {\n        parsedData = responseData.data\n      } else if (responseData && Array.isArray(responseData.events)) {\n        parsedData = responseData.events\n      }\n      \n      return {\n        statusCode,\n        responseData,\n        parsedData,\n        parsedCount: parsedData.length\n      }\n    } catch (error) {\n      return {\n        error: error.message\n      }\n    }\n  }\n\n  return {\n    // Áä∂ÊÄÅ\n    pageTitle,\n    currentView,\n    selectedDate,\n    events,\n    loading,\n    colorOptions,\n    reminderOptions,\n    debugInfo,\n    \n    // ËÆ°ÁÆóÂ±ûÊÄß\n    displayDate,\n    monthDays,\n    weekDays,\n    \n    // ÊñπÊ≥ï\n    switchView,\n    previousPeriod,\n    nextPeriod,\n    goToToday,\n    selectDate,\n    getTimeEventsForDay,\n    getEventsForTimeSlot,\n    getLongEventsForDay,\n    loadEvents,\n    createEvent,\n    updateEvent,\n    deleteEvent,\n    \n    // Êñ∞Â¢ûÁöÑ‰ºòÂåñÊñπÊ≥ï\n    loadEventsSilently,\n    startSilentRefresh,\n    \n    // Ë∞ÉËØïÊñπÊ≥ï\n    debugSystem,\n    debugReminders,\n    testHealth,\n    testNetwork,\n    testEventsAPI,\n    \n    // Â∑•ÂÖ∑ÊñπÊ≥ï\n    isNgrokEnvironment,\n    getRequestHeaders\n  }\n})"],"names":["defineStore","ref","moment","computed","Solar","uni","reminderService"],"mappings":"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"}
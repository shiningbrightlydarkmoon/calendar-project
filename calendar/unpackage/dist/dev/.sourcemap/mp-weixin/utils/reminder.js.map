{"version":3,"file":"reminder.js","sources":["utils/reminder.js"],"sourcesContent":["// utils/reminder.js - ÂÆåÊï¥Áâà\n\nclass ReminderService {\n  constructor() {\n    this.initialized = false;\n    this.notifications = new Map(); // Ë∑üË∏™Â∑≤ËÆæÁΩÆÁöÑÈÄöÁü•\n  }\n\n  /**\n   * ÂàùÂßãÂåñÊèêÈÜíÊúçÂä°\n   */\n  async init() {\n    if (this.initialized) return;\n    \n    // #ifdef APP-PLUS\n    try {\n      plus.push.requestPermission((res) => {\n        console.log('üîî ÈÄöÁü•ÊùÉÈôêÁä∂ÊÄÅ:', res);\n        this.initialized = true;\n        \n        // Ê∏ÖÁêÜÂèØËÉΩÁöÑËøáÊúüÈÄöÁü•ËÆ∞ÂΩï\n        this.cleanupOldNotifications();\n      });\n    } catch (error) {\n      console.error('‚ùå ÊèêÈÜíÊúçÂä°ÊùÉÈôêÂàùÂßãÂåñÂ§±Ë¥•:', error);\n    }\n    // #endif\n    \n    // #ifndef APP-PLUS\n    this.initialized = true;\n    // #endif\n  }\n\n  /**\n   * Ê∏ÖÁêÜËøáÊúüÈÄöÁü•ËÆ∞ÂΩï\n   */\n  cleanupOldNotifications() {\n    try {\n      const now = Date.now();\n      const oneDayAgo = now - 24 * 60 * 60 * 1000;\n      \n      // Ê∏ÖÁêÜÂÜÖÂ≠ò‰∏≠ÁöÑËøáÊúüËÆ∞ÂΩï\n      for (const [id, notification] of this.notifications) {\n        if (notification.timestamp < oneDayAgo) {\n          this.notifications.delete(id);\n        }\n      }\n      \n      console.log('üßπ Ê∏ÖÁêÜËøáÊúüÈÄöÁü•ËÆ∞ÂΩïÂÆåÊàê');\n    } catch (error) {\n      console.error('Ê∏ÖÁêÜÈÄöÁü•Â§±Ë¥•:', error);\n    }\n  }\n\n  /**\n   * ÂàõÂª∫Êú¨Âú∞ÈÄöÁü•ÔºàÊîØÊåÅÂ§ö‰∏™ÊèêÈÜíÊó∂Èó¥Ôºâ\n   */\n  createLocalNotification(rawEvent) {\n    return new Promise((resolve) => {\n      // ÊèêÂèñÊó•Á®ãÊï∞ÊçÆ\n      const event = (rawEvent && rawEvent.data) ? rawEvent.data : rawEvent;\n\n      // Âü∫Êú¨Ê†°È™å\n      if (!event || !event.title || !event.startDate) {\n        console.warn('Êï∞ÊçÆ‰∏çÂÆåÊï¥ÔºåÂøΩÁï•ÊèêÈÜíËÆæÁΩÆ');\n        return resolve();\n      }\n\n      // Ëß£ÊûêÂºÄÂßãÊó∂Èó¥\n      const startTime = this.parseEventDateTime(event);\n      if (!startTime) {\n        console.warn('Êó†Ê≥ïËß£ÊûêÊó•Á®ãÊó∂Èó¥');\n        return resolve();\n      }\n\n      const now = Date.now();\n      \n      // Ê£ÄÊü•ÊòØÂê¶ÊòØËøáÂéªÊó•Á®ã\n      if (startTime <= now) {\n        console.log('‚è∞ ËøáÂéªÊó•Á®ãÔºå‰∏çËÆæÁΩÆÊèêÈÜí:', event.title);\n        return resolve();\n      }\n\n      // Ëé∑ÂèñÊèêÈÜíÊó∂Èó¥ÔºàÊîØÊåÅÂ§ö‰∏™ÊèêÈÜíÔºâ\n      let reminderMinutes = 15; // ÈªòËÆ§15ÂàÜÈíüÂâç\n      \n      // Â¶ÇÊûú‰∫ã‰ª∂‰∏≠ÊúâÊåáÂÆöÁöÑÊèêÈÜíÊó∂Èó¥Ôºå‰ΩøÁî®ÂÆÉ\n      if (event.reminderMinutes !== undefined) {\n        reminderMinutes = event.reminderMinutes;\n      }\n      \n      // ËÆ°ÁÆóÊèêÈÜíÊó∂Èó¥\n      let reminderTime = startTime - (reminderMinutes * 60 * 1000);\n      const minReminderTime = now + 10000; // Ëá≥Â∞ë10ÁßíÂêé\n      \n      // Ë∞ÉÊï¥ÊèêÈÜíÊó∂Èó¥\n      if (reminderTime <= now) {\n        // Â¶ÇÊûúÊèêÈÜíÊó∂Èó¥Âú®ËøáÂéªÔºåÁ´ãÂç≥ÊèêÈÜí\n        reminderTime = Math.max(minReminderTime, now + 5000);\n        console.log(`‚è±Ô∏è ÊèêÈÜíÊó∂Èó¥Â∑≤ËøáÔºåË∞ÉÊï¥‰∏∫Á´ãÂç≥ÊèêÈÜí: \"${event.title}\"`);\n      }\n\n      // #ifdef APP-PLUS\n      if (!plus.push) {\n        console.warn('plus.push Êú™ÂàùÂßãÂåñ');\n        return resolve();\n      }\n\n      const delay = reminderTime - now;\n      const eventId = event._id || event.id || Date.now().toString();\n      \n      // ‰∏∫ÊØè‰∏™ÊèêÈÜíÁîüÊàêÂîØ‰∏ÄID\n      const reminderId = `${eventId}_${reminderMinutes}`;\n\n      // ÊûÑÈÄ†ÈÄöÁü•ÂÜÖÂÆπ\n      let content = event.title;\n      \n      // Ê∑ªÂä†ÊèêÈÜíÊó∂Èó¥‰ø°ÊÅØÂà∞ÈÄöÁü•ÂÜÖÂÆπ\n      if (reminderMinutes > 0) {\n        if (reminderMinutes < 60) {\n          content = `[${reminderMinutes}ÂàÜÈíüÂâç] ${event.title}`;\n        } else if (reminderMinutes < 1440) {\n          const hours = Math.floor(reminderMinutes / 60);\n          content = `[${hours}Â∞èÊó∂Ââç] ${event.title}`;\n        } else if (reminderMinutes < 10080) {\n          const days = Math.floor(reminderMinutes / 1440);\n          content = `[${days}Â§©Ââç] ${event.title}`;\n        } else {\n          const weeks = Math.floor(reminderMinutes / 10080);\n          content = `[${weeks}Âë®Ââç] ${event.title}`;\n        }\n      } else {\n        content = `[ÂáÜÊó∂] ${event.title}`;\n      }\n      \n      const payload = JSON.stringify({ \n        id: eventId, \n        reminderId: reminderId,\n        type: 'calendar_event',\n        title: event.title,\n        reminderMinutes: reminderMinutes,\n        startTime: new Date(startTime).toLocaleString()\n      });\n      \n      const options = {\n        title: reminderMinutes === 0 ? 'Êó•Á®ãÂºÄÂßã' : 'Êó•Á®ãÊèêÈÜí',\n        cover: false,\n        sound: 'system',\n        when: new Date(reminderTime)\n      };\n\n      try {\n        // ËÆæÁΩÆÂÆöÊó∂ÊèêÈÜí\n        setTimeout(() => {\n          try {\n            plus.push.createMessage(content, payload, options);\n            \n            const timeText = this.getReminderTimeText(reminderMinutes);\n            console.log(`üöÄ Ëß¶Âèë${timeText}ÊèêÈÜí: \"${event.title}\"`);\n            \n            // ÈÄöÁü•Ëß¶ÂèëÂêé‰ªéË∑üË∏™‰∏≠ÁßªÈô§\n            this.notifications.delete(reminderId);\n          } catch (e) {\n            console.error('Êé®ÈÄÅÂ§±Ë¥•:', e);\n          }\n        }, delay);\n        \n        // Ë∑üË∏™Ëøô‰∏™ÈÄöÁü•\n        this.notifications.set(reminderId, {\n          id: reminderId,\n          eventId: eventId,\n          title: event.title,\n          reminderMinutes: reminderMinutes,\n          startTime: startTime,\n          reminderTime: reminderTime,\n          timestamp: now\n        });\n        \n        const delaySeconds = Math.round(delay / 1000);\n        const delayMinutes = Math.round(delaySeconds / 60);\n        \n        const timeText = this.getReminderTimeText(reminderMinutes);\n        \n        if (delaySeconds < 60) {\n          console.log(`‚úÖ ${timeText}ÊèêÈÜíÊéíÊúüÊàêÂäü: \"${event.title}\"Ôºå${delaySeconds}ÁßíÂêéËß¶Âèë`);\n        } else {\n          console.log(`‚úÖ ${timeText}ÊèêÈÜíÊéíÊúüÊàêÂäü: \"${event.title}\"Ôºå${delayMinutes}ÂàÜÈíüÂêéËß¶Âèë`);\n        }\n        \n      } catch (error) {\n        console.error('ËÆæÁΩÆÊèêÈÜíÂ§±Ë¥•:', error);\n      }\n      // #endif\n      \n      // #ifdef H5\n      this.createH5Notification(event, reminderTime, reminderMinutes).then(resolve);\n      // #endif\n      \n      // #ifdef MP-WEIXIN\n      console.log('ÂæÆ‰ø°Â∞èÁ®ãÂ∫èÊöÇ‰∏çÊîØÊåÅÊú¨Âú∞ÈÄöÁü•');\n      // #endif\n      \n      resolve();\n    });\n  }\n\n  /**\n   * Ëé∑ÂèñÊèêÈÜíÊó∂Èó¥ÊñáÊú¨\n   */\n  getReminderTimeText(minutes) {\n    if (minutes === 0) return 'ÂáÜÊó∂';\n    if (minutes < 60) return `${minutes}ÂàÜÈíüÂâç`;\n    if (minutes < 1440) return `${Math.floor(minutes / 60)}Â∞èÊó∂Ââç`;\n    if (minutes < 10080) return `${Math.floor(minutes / 1440)}Â§©Ââç`;\n    return `${Math.floor(minutes / 10080)}Âë®Ââç`;\n  }\n\n  /**\n   * Ëß£Êûê‰∫ã‰ª∂Êó•ÊúüÊó∂Èó¥\n   */\n  parseEventDateTime(event) {\n    try {\n      const dateStr = event.startDate.replace(/-/g, '/');\n      \n      if (event.isAllDay === true) {\n        // ÂÖ®Â§©‰∫ã‰ª∂Ôºö‰ΩøÁî®ÂΩìÂ§©ÁöÑÂºÄÂßãÊó∂Èó¥Ôºà00:00Ôºâ\n        return new Date(dateStr).getTime();\n      }\n      \n      const timeStr = event.startTime || '00:00';\n      return new Date(`${dateStr} ${timeStr}`).getTime();\n    } catch (e) {\n      console.error('Êó•ÊúüÊó∂Èó¥Ëß£ÊûêÂ§±Ë¥•:', e);\n      return null;\n    }\n  }\n\n  /**\n   * Ê£ÄÊü•Êó•Á®ãÊòØÂê¶Â∑≤ÁªèËøáÂéª\n   */\n  isEventInPast(event) {\n    try {\n      const eventTime = this.parseEventDateTime(event);\n      if (!eventTime) return true;\n      \n      return eventTime <= Date.now();\n    } catch (e) {\n      console.error('Ê£ÄÊü•Êó•Á®ãÊó∂Èó¥Â§±Ë¥•:', e);\n      return true;\n    }\n  }\n\n  /**\n   * Ê∏ÖÈô§ÁâπÂÆö‰∫ã‰ª∂ÁöÑÊâÄÊúâÊèêÈÜí\n   */\n  cancelNotification(eventId = null) {\n    // #ifdef APP-PLUS\n    if (typeof plus !== 'undefined' && plus.push) {\n      if (eventId) {\n        // Ê∏ÖÈô§ËØ•‰∫ã‰ª∂ÁöÑÊâÄÊúâÊèêÈÜí\n        let count = 0;\n        for (const [id, notification] of this.notifications) {\n          if (notification.eventId === eventId) {\n            this.notifications.delete(id);\n            count++;\n          }\n        }\n        console.log(`üóëÔ∏è ÂèñÊ∂à‰∫ã‰ª∂ ${eventId} ÁöÑ ${count} ‰∏™ÊèêÈÜí`);\n      }\n    }\n    // #endif\n  }\n\n  /**\n   * ‰∏∫‰∫ã‰ª∂ËÆæÁΩÆÂ§ö‰∏™ÊèêÈÜí\n   */\n  async setupMultipleReminders(event, reminderMinutesArray) {\n    if (!reminderMinutesArray || !Array.isArray(reminderMinutesArray)) {\n      console.warn('Êó†ÊïàÁöÑÊèêÈÜíÊó∂Èó¥Êï∞ÁªÑ');\n      return;\n    }\n    \n    const now = Date.now();\n    const startTime = this.parseEventDateTime(event);\n    \n    if (!startTime || startTime <= now) {\n      console.log('‚è∞ ËøáÂéªÊó•Á®ãÔºå‰∏çËÆæÁΩÆÊèêÈÜí');\n      return;\n    }\n    \n    console.log(`üìÖ ‰∏∫Êó•Á®ã \"${event.title}\" ËÆæÁΩÆ ${reminderMinutesArray.length} ‰∏™ÊèêÈÜí`);\n    \n    // ‰∏∫ÊØè‰∏™ÊèêÈÜíÊó∂Èó¥ËÆæÁΩÆÈÄöÁü•\n    for (const minutes of reminderMinutesArray) {\n      const reminderEvent = {\n        ...event,\n        reminderMinutes: minutes\n      };\n      \n      await this.createLocalNotification(reminderEvent);\n    }\n  }\n\n  /**\n   * H5 ÊµèËßàÂô®ÈÄöÁü•ÂÆûÁé∞\n   */\n  async createH5Notification(event, reminderTime, reminderMinutes) {\n    if ('Notification' in window) {\n      if (Notification.permission === 'default') {\n        await Notification.requestPermission();\n      }\n      \n      if (Notification.permission === 'granted') {\n        const now = Date.now();\n        const delay = reminderTime - now;\n        \n        if (delay > 0) {\n          setTimeout(() => {\n            const timeText = this.getReminderTimeText(reminderMinutes);\n            new Notification(`${timeText}ÊèêÈÜí`, { \n              body: `${event.title}\\nÂºÄÂßãÊó∂Èó¥: ${new Date(this.parseEventDateTime(event)).toLocaleString()}`,\n              icon: '/static/logo.png'\n            });\n            console.log(`üîî Ëß¶Âèë${timeText}ÊµèËßàÂô®ÈÄöÁü•: ${event.title}`);\n          }, delay);\n        } else {\n          // Á´ãÂç≥Ëß¶Âèë\n          const timeText = this.getReminderTimeText(reminderMinutes);\n          new Notification(`${timeText}ÊèêÈÜí`, { \n            body: `${event.title}\\nÂºÄÂßãÊó∂Èó¥: ${new Date(this.parseEventDateTime(event)).toLocaleString()}`\n          });\n        }\n      }\n    }\n  }\n  \n  /**\n   * Ëé∑ÂèñÊâÄÊúâÂ∑≤ËÆæÁΩÆÁöÑÊèêÈÜí\n   */\n  getAllScheduledNotifications() {\n    const now = Date.now();\n    const upcoming = [];\n    const past = [];\n    \n    for (const [id, notification] of this.notifications) {\n      if (notification.reminderTime > now) {\n        const timeLeft = notification.reminderTime - now;\n        upcoming.push({\n          id: id,\n          eventId: notification.eventId,\n          title: notification.title,\n          reminderText: this.getReminderTimeText(notification.reminderMinutes),\n          reminderTime: new Date(notification.reminderTime).toLocaleString(),\n          starts: new Date(notification.startTime).toLocaleString(),\n          secondsLeft: Math.round(timeLeft / 1000),\n          minutesLeft: Math.round(timeLeft / 60000)\n        });\n      } else {\n        past.push({\n          id: id,\n          eventId: notification.eventId,\n          title: notification.title,\n          reminderText: this.getReminderTimeText(notification.reminderMinutes)\n        });\n      }\n    }\n    \n    return {\n      upcoming: upcoming,\n      past: past,\n      total: this.notifications.size\n    };\n  }\n  \n  /**\n   * Ê∏ÖÈô§ÊâÄÊúâÊèêÈÜíË∑üË∏™ËÆ∞ÂΩï\n   */\n  clearAllNotifications() {\n    this.notifications.clear();\n    console.log('üóëÔ∏è Â∑≤Ê∏ÖÈô§ÊâÄÊúâÊèêÈÜíË∑üË∏™ËÆ∞ÂΩï');\n  }\n}\n\nexport default new ReminderService();"],"names":["uni"],"mappings":"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"}